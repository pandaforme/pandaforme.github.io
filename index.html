<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-tw">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Programming blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="This is a programming blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Programming blog">
<meta property="og:url" content="https://pandaforme.github.io/index.html">
<meta property="og:site_name" content="Programming blog">
<meta property="og:description" content="This is a programming blog">
<meta property="og:locale" content="zh-tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Programming blog">
<meta name="twitter:description" content="This is a programming blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://pandaforme.github.io/"/>





  <title> Programming blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-tw">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-53742025-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Programming blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">This is a programming blog</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分類
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            關於
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            標籤
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            檢索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2017/04/26/Scala-The-importance-of-recursion/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/26/Scala-The-importance-of-recursion/" itemprop="url">
                  [Scala] The importance of recursion
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-26T17:55:00+08:00">
                2017-04-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Scala/" itemprop="url" rel="index">
                    <span itemprop="name">Scala</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/04/26/Scala-The-importance-of-recursion/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/04/26/Scala-The-importance-of-recursion/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="&#x905E;&#x8FF4;"><a href="#&#x905E;&#x8FF4;" class="headerlink" title="&#x905E;&#x8FF4;"></a>&#x905E;&#x8FF4;</h1><p>&#x5728;functional programming&#x4E16;&#x754C;&#x4E2D;&#x662F;&#x4E0D;&#x51C6;&#x8A31;&#x6709;mutable&#x8B8A;&#x6578;&#xFF0C;&#x610F;&#x5473;&#x8457;&#x6211;&#x5011;&#x719F;&#x6089;&#x7684; <code>while</code>, <code>for</code> &#x8FF4;&#x5708;&#x90FD;&#x662F;&#x7981;&#x6B62;&#x4F7F;&#x7528;&#x3002;<br>&#x90A3;&#x6211;&#x5011;&#x61C9;&#x8A72;&#x600E;&#x9EBC;&#x8FA6;&#x5462;&#xFF1F; &#x9019;&#x908A;&#x6703;&#x8209;&#x500B;&#x6578;&#x500B;&#x4F8B;&#x5B50;&#xFF0C;&#x4F86;&#x89E3;&#x91CB;&#x662F;&#x900F;&#x904E;&#x905E;&#x8FF4;&#x65B9;&#x5F0F;&#x4F86;&#x5B8C;&#x6210; <code>while</code> &#x6216; <code>for</code> &#x8FF4;&#x5708;&#x3002;</p>
<h2 id="&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5927;&#x503C;"><a href="#&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5927;&#x503C;" class="headerlink" title="&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5927;&#x503C;"></a>&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5927;&#x503C;</h2><p>&#x5982;&#x679C;&#x5728; <code>Java</code> &#x6211;&#x5011;&#x6703;&#x600E;&#x9EBC;&#x505A;&#x5462;&#xFF1F;</p>
<ol>
<li>&#x5BA3;&#x500B;&#x4E00;&#x500B;&#x8B8A;&#x6578;(max)&#x5B58;&#x653E;&#x76EE;&#x524D;&#x7684;&#x6700;&#x5927;&#x503C;</li>
<li>&#x900F;&#x904E;<code>while</code> &#x6216; <code>for</code> &#x8FF4;&#x5708;&#xFF0C;&#x5C07;&#x4E32;&#x5217;&#x4E2D;&#x7684;&#x6BCF;&#x500B;&#x5143;&#x7D20;&#x8DDF;&#x6211;&#x5011;&#x5BA3;&#x544A;&#x7684;&#x8B8A;&#x6578;(max)&#x6BD4;&#x5927;&#x5C0F;<br>2.1 &#x82E5;&#x5143;&#x7D20;&#x7684;&#x503C;&#x5927;&#x65BC;max&#xFF0C;max&#x7684;&#x503C;&#x5C31;&#x6539;&#x70BA;&#x6B64;&#x5143;&#x7D20;&#x7684;&#x503C;<br>2.2 &#x82E5;&#x5143;&#x7D20;&#x7684;&#x503C;&#x5C0F;&#x65BC;&#x6216;&#x7B49;&#x65BC;max&#xFF0C;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x4E8B;</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> max = <span class="type">Int</span>.<span class="type">MinValue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i &lt;- <span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)){</span><br><span class="line">  <span class="keyword">if</span>(i &gt; max)</span><br><span class="line">    max = i</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x900F;&#x904E;&#x905E;&#x8FF4;&#x65B9;&#x5F0F;&#x6211;&#x5011;&#x6703;&#x600E;&#x9EBC;&#x89E3;&#x6C7A;&#x5462;&#xFF1F;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">findMax(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findMax</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">Int</span> = {</span><br><span class="line">   list <span class="keyword">match</span>{</span><br><span class="line">     <span class="comment">// &#x5047;&#x5982;&#x662F;&#x7A7A;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x6211;&#x5011;&#x56DE;&#x50B3;0</span></span><br><span class="line">     <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="number">0</span></span><br><span class="line">     <span class="comment">// &#x5047;&#x5982;&#x53EA;&#x6709;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x90A3;&#x6700;&#x5927;&#x503C;&#x5C31;&#x70BA;&#x8A72;&#x5143;&#x7D20;</span></span><br><span class="line">     <span class="keyword">case</span> h :: <span class="type">Nil</span> =&gt; h</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// &#x4E3B;&#x8981;&#x908F;&#x8F2F;</span></span><br><span class="line">     <span class="keyword">case</span> h :: t =&gt; <span class="type">Math</span>.max(h, findMax(t))</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x5728;&#x8FF4;&#x5708;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x9010;&#x4E00;&#x6BCF;&#x500B;&#x5143;&#x7D20;&#x8DDF;&#x67D0;&#x4E00;&#x500B;mutable&#x8B8A;&#x6578;&#x6BD4;&#x5927;&#x5C0F;&#x3002;</li>
<li>&#x5728;&#x8FF4;&#x905E;&#x7248;&#x672C;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x8DDF;&#x53BB;&#x9664;&#x7B2C;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#x7684;&#x6700;&#x5927;&#x503C;&#x6BD4;&#x5927;&#x5C0F;&#x3002;</li>
</ul>
<p>&#x8FF4;&#x905E;&#x7684;&#x5BEB;&#x6CD5;&#x66F4;&#x662F;&#x7C21;&#x6F54;&#x548C;&#x8868;&#x9054;&#x51FA;&#x6574;&#x500B;&#x7A0B;&#x5F0F;&#x4E3B;&#x8981;&#x908F;&#x8F2F;&#xFF0C;&#x6211;&#x5011;&#x518D;&#x4F86;&#x591A;&#x8A66;&#x770B;&#x770B;&#x5E7E;&#x500B;&#x984C;&#x76EE;&#x3002;</p>
<h2 id="&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5C0F;&#x503C;"><a href="#&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5C0F;&#x503C;" class="headerlink" title="&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5C0F;&#x503C;"></a>&#x5F9E;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x627E;&#x51FA;&#x6700;&#x5C0F;&#x503C;</h2><p>&#x505A;&#x6CD5;&#x8DDF;&#x627E;&#x51FA;&#x6700;&#x5927;&#x503C;&#x985E;&#x4F3C;&#xFF0C;&#x7B2C;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x8DDF;&#x53BB;&#x9664;&#x7B2C;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#x7684;&#x6700;&#x5C0F;&#x503C;&#x6BD4;&#x5927;&#x5C0F;&#x3002;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">findMin(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findMin</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">Int</span> = {</span><br><span class="line">   list <span class="keyword">match</span>{</span><br><span class="line">     <span class="comment">// &#x5047;&#x5982;&#x662F;&#x7A7A;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x6211;&#x5011;&#x56DE;&#x50B3;0</span></span><br><span class="line">     <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="number">0</span></span><br><span class="line">     <span class="comment">// &#x5047;&#x5982;&#x53EA;&#x6709;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x90A3;&#x6700;&#x5C0F;&#x503C;&#x5C31;&#x70BA;&#x8A72;&#x5143;&#x7D20;</span></span><br><span class="line">     <span class="keyword">case</span> h :: <span class="type">Nil</span> =&gt; h</span><br><span class="line">     </span><br><span class="line">     <span class="comment">// &#x4E3B;&#x8981;&#x908F;&#x8F2F;</span></span><br><span class="line">     <span class="keyword">case</span> h :: t =&gt; <span class="type">Math</span>.min(h, findMin(t))</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x6AA2;&#x67E5;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x500B;&#x7279;&#x5B9A;&#x503C;"><a href="#&#x6AA2;&#x67E5;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x500B;&#x7279;&#x5B9A;&#x503C;" class="headerlink" title="&#x6AA2;&#x67E5;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x500B;&#x7279;&#x5B9A;&#x503C;"></a>&#x6AA2;&#x67E5;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x4E2D;&#x662F;&#x5426;&#x5B58;&#x5728;&#x67D0;&#x500B;&#x7279;&#x5B9A;&#x503C;</h2><p>&#x6AA2;&#x67E5;&#x7B2C;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x662F;&#x5426;&#x7B49;&#x65BC;&#x76EE;&#x6A19;&#x503C;&#x6216;&#x662F;&#x53BB;&#x9664;&#x7B2C;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#x6709;&#x76EE;&#x6A19;&#x503C;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">find(<span class="type">List</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>), <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>], target: <span class="type">Int</span>): <span class="type">Boolean</span> = {</span><br><span class="line">   list <span class="keyword">match</span>{</span><br><span class="line">     <span class="comment">// &#x5047;&#x5982;&#x662F;&#x7A7A;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x56DE;&#x50B3;false</span></span><br><span class="line">     <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="literal">false</span></span><br><span class="line">     <span class="comment">// &#x5047;&#x5982;&#x53EA;&#x6709;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x800C;&#x4E14;&#x8A72;&#x5143;&#x7D20;&#x7B49;&#x65BC;target&#xFF0C;&#x56DE;&#x50B3;true</span></span><br><span class="line">     <span class="keyword">case</span> h :: <span class="type">Nil</span> <span class="keyword">if</span> (h == target) =&gt; <span class="literal">true</span></span><br><span class="line">     </span><br><span class="line">     <span class="comment">// &#x4E3B;&#x8981;&#x908F;&#x8F2F;</span></span><br><span class="line">     <span class="keyword">case</span> h :: t =&gt; (h == target) || find(t, target)</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x53CD;&#x8F49;&#x4E00;&#x500B;&#x5B57;&#x4E32;"><a href="#&#x53CD;&#x8F49;&#x4E00;&#x500B;&#x5B57;&#x4E32;" class="headerlink" title="&#x53CD;&#x8F49;&#x4E00;&#x500B;&#x5B57;&#x4E32;"></a>&#x53CD;&#x8F49;&#x4E00;&#x500B;&#x5B57;&#x4E32;</h2><p>&#x5148;&#x53CD;&#x8F49;&#x53BB;&#x9664;&#x7B2C;&#x4E00;&#x500B;&#x5B57;&#x5143;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x4E4B;&#x5F8C;&#x518D;&#x5C07;&#x7B2C;&#x4E00;&#x5B57;&#x5143;&#x653E;&#x5728;&#x6700;&#x5F8C;&#x9762;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">reverse(<span class="string">&quot;I should learn scala seriously!&quot;</span>.toList)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reverse</span></span>(list: <span class="type">List</span>[<span class="type">Char</span>]): <span class="type">String</span> = {</span><br><span class="line">  list <span class="keyword">match</span> {</span><br><span class="line">    <span class="comment">// &#x5047;&#x5982;&#x662F;&#x7A7A;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x56DE;&#x50B3;false</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="comment">// &#x5047;&#x5982;&#x53EA;&#x6709;&#x4E00;&#x500B;&#x5143;&#x7D20;&#x7684;&#x4E32;&#x5217;&#xFF0C;&#x56DE;&#x50B3;&#x8A72;&#x5143;&#x7D20;</span></span><br><span class="line">    <span class="keyword">case</span> h :: <span class="type">Nil</span> =&gt; h.toString</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#x4E3B;&#x8981;&#x908F;&#x8F2F;</span></span><br><span class="line">    <span class="keyword">case</span> h :: t =&gt; reverse(t) + h</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x5224;&#x65B7;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x70BA;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x7684;&#x5B50;&#x5B57;&#x4E32;"><a href="#&#x5224;&#x65B7;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x70BA;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x7684;&#x5B50;&#x5B57;&#x4E32;" class="headerlink" title="&#x5224;&#x65B7;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x70BA;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x7684;&#x5B50;&#x5B57;&#x4E32;"></a>&#x5224;&#x65B7;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x662F;&#x5426;&#x70BA;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x5B57;&#x4E32;&#x7684;&#x5B50;&#x5B57;&#x4E32;</h2><p>&#x5B50;&#x5B57;&#x4E32;&#x7684;&#x5B9A;&#x7FA9;&#xFF1A;&#x5B57;&#x6578;&#xFF0C;&#x5167;&#x5BB9;&#x548C;&#x9806;&#x5E8F;&#x9700;&#x8981;&#x7B26;&#x5408;&#xFF0C;&#x7A7A;&#x5B57;&#x4E32;&#x70BA;&#x4EFB;&#x4F55;&#x5B57;&#x4E32;&#x7684;&#x5B50;&#x5B57;&#x4E32;<br>&#x4F8B;&#x5982;&#xFF1A;</p>
<ul>
<li>&#x201C;abc&#x201D; &#x70BA; &#x201C;XXXYYYabc&#x201D;&#x7684;&#x5B50;&#x5B57;&#x4E32;</li>
<li>&#x201C;XXXY&#x201D; &#x70BA; &#x201C;XXXYYYabc&#x201D;&#x7684;&#x5B50;&#x5B57;&#x4E32;</li>
<li>&#x201C;&#x201D; &#x70BA; &#x201C;XXXYYYabc&#x201D;&#x7684;&#x5B50;&#x5B57;&#x4E32;</li>
<li>&#x201C;ABC&#x201D; &#x4E0D;&#x70BA; &#x201C;XXXYYYabc&#x201D;&#x7684;&#x5B50;&#x5B57;&#x4E32;</li>
<li>&#x201C;QQWW&#x201D; &#x4E0D;&#x70BA; &#x201C;XXXYYYabc&#x201D;&#x7684;&#x5B50;&#x5B57;&#x4E32;</li>
<li>&#x201C;XXXaYYY&#x201D; &#x4E0D;&#x70BA; &#x201C;XXXYYYabc&#x201D;&#x7684;&#x5B50;&#x5B57;&#x4E32;</li>
</ul>
<p>&#x5148;&#x6BD4;&#x8F03;&#x4E3B;&#x8981;&#x5B57;&#x4E32;&#x548C;&#x5B50;&#x5B57;&#x4E32;&#x7684;&#x7B2C;&#x4E00;&#x500B;&#x5B57;&#x6BCD;&#x662F;&#x5426;&#x4E00;&#x6A23;&#xFF0C;</p>
<ul>
<li>&#x82E5;&#x4E00;&#x6A23;&#x5247;&#x9019;&#x5169;&#x500B;&#x5B57;&#x4E32;&#x53BB;&#x9664;&#x7B2C;&#x4E00;&#x500B;&#x5B57;&#x6BCD;&#x7E7C;&#x7E8C;&#x6BD4;</li>
<li>&#x82E5;&#x4E0D;&#x4E00;&#x6A23;&#xFF0C;&#x4E3B;&#x8981;&#x5B57;&#x4E32;&#x53BB;&#x9664;&#x7B2C;&#x4E00;&#x500B;&#x5B57;&#x6BCD;&#x548C;&#x5B50;&#x5B57;&#x4E32;&#x7E7C;&#x7E8C;&#x6BD4;</li>
</ul>
<p>&#x4F8B;&#x5982;&#xFF1A;<br>&#x4E3B;&#x8981;&#x5B57;&#x4E32;&#xFF1A; &#x201C;abcdefghi&#x201D;<br>&#x5B50;&#x5B57;&#x4E32;: &#x201C;abc&#x201D;<br>&#x6AA2;&#x67E5;&#x4E3B;&#x8981;&#x5B57;&#x4E32;&#x524D;&#x4E09;&#x500B;&#x5B57;&#x6BCD;&#xFF08;abc&#xFF09;&#x662F;&#x5426;&#x548C;&#x5B50;&#x5B57;&#x4E32;&#xFF08;abc&#xFF09;&#x4E00;&#x6A23;&#xFF0C;&#x82E5;&#x4E00;&#x6A23;&#x5C31;&#x56DE;&#x50B3;<code>true</code></p>
<p>&#x4E3B;&#x8981;&#x5B57;&#x4E32;&#xFF1A; &#x201C;abcdefghi&#x201D;<br>&#x5B50;&#x5B57;&#x4E32;: &#x201C;defgh&#x201D;<br>&#x6AA2;&#x67E5;&#x4E3B;&#x8981;&#x5B57;&#x4E32;&#x524D;&#x4E94;&#x500B;&#x5B57;&#x6BCD;&#xFF08;abcde&#xFF09;&#x662F;&#x5426;&#x548C;&#x5B50;&#x5B57;&#x4E32;&#xFF08;defgh&#xFF09;&#x4E00;&#x6A23;&#xFF0C;&#x82E5;&#x4E0D;&#x4E00;&#x6A23;&#xFF0C;<br>&#x5247; &#x201C;bcdefghi&#x201D; &#x548C; &#x201C;defgh&#x201D; &#x7E7C;&#x7E8C;&#x6BD4;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">println(isSubString(<span class="string">&quot;I should learn scala seriously!&quot;</span>.toList, <span class="string">&quot;scala&quot;</span>.toList))</span><br><span class="line">println(isSubString(<span class="string">&quot;I should learn scala seriously!&quot;</span>.toList, <span class="string">&quot;XXOO&quot;</span>.toList))</span><br><span class="line">println(isSubString(<span class="string">&quot;I should learn scala seriously!&quot;</span>.toList, <span class="string">&quot;scaxxyyla&quot;</span>.toList))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isSubString</span></span>(original: <span class="type">List</span>[<span class="type">Char</span>], target: <span class="type">List</span>[<span class="type">Char</span>]): <span class="type">Boolean</span> = {</span><br><span class="line">  (original, target) <span class="keyword">match</span> {</span><br><span class="line">    <span class="keyword">case</span> (<span class="type">Nil</span>, _) =&gt; <span class="literal">false</span></span><br><span class="line">    <span class="keyword">case</span> (_, <span class="type">Nil</span>) =&gt; <span class="literal">true</span></span><br><span class="line">    <span class="keyword">case</span> (o :: <span class="type">Nil</span>, t :: <span class="type">Nil</span>) <span class="keyword">if</span> (o == t) =&gt; <span class="literal">true</span></span><br><span class="line">    <span class="keyword">case</span> (o :: <span class="type">Nil</span>, t :: <span class="type">Nil</span>) <span class="keyword">if</span> (o != t) =&gt; <span class="literal">false</span></span><br><span class="line">    <span class="keyword">case</span> (o, t) <span class="keyword">if</span> (o.take(t.length) == t) =&gt; <span class="literal">true</span></span><br><span class="line">    <span class="keyword">case</span> (oh :: ot, t) =&gt; isSubString(ot, t)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x5C07;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x7531;&#x5C0F;&#x6392;&#x5230;&#x5927;"><a href="#&#x5C07;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x7531;&#x5C0F;&#x6392;&#x5230;&#x5927;" class="headerlink" title="&#x5C07;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x7531;&#x5C0F;&#x6392;&#x5230;&#x5927;"></a>&#x5C07;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x7531;&#x5C0F;&#x6392;&#x5230;&#x5927;</h2><p>&#x6211;&#x5011;&#x4F86;&#x5BE6;&#x4F5C;<a href="https://zh.wikipedia.org/wiki/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F" target="_blank" rel="noopener">Quicksort</a></p>
<ol>
<li>&#x5F9E;&#x6578;&#x5217;&#x4E2D;&#x6311;&#x51FA;&#x4E00;&#x500B;&#x5143;&#x7D20;&#xFF0C;&#x7A31;&#x70BA; &#x201C;&#x57FA;&#x6E96;&#x201D;&#xFF08;pivot&#xFF09;&#x3002;</li>
<li>&#x91CD;&#x65B0;&#x6392;&#x5E8F;&#x6578;&#x5217;&#xFF0C;&#x6240;&#x6709;&#x6BD4;&#x57FA;&#x6E96;&#x503C;&#x5C0F;&#x7684;&#x5143;&#x7D20;&#x64FA;&#x653E;&#x5728;&#x57FA;&#x6E96;&#x524D;&#x9762;&#xFF0C;&#x6240;&#x6709;&#x6BD4;&#x57FA;&#x6E96;&#x503C;&#x5927;&#x7684;&#x5143;&#x7D20;&#x64FA;&#x5728;&#x57FA;&#x6E96;&#x5F8C;&#x9762;&#xFF08;&#x76F8;&#x540C;&#x7684;&#x6578;&#x53EF;&#x4EE5;&#x5230;&#x4EFB;&#x4E00;&#x908A;&#xFF09;&#x3002;&#x5728;&#x9019;&#x500B;&#x5206;&#x5272;&#x7D50;&#x675F;&#x4E4B;&#x5F8C;&#xFF0C;&#x8A72;&#x57FA;&#x6E96;&#x5C31;&#x8655;&#x65BC;&#x6578;&#x5217;&#x7684;&#x4E2D;&#x9593;&#x4F4D;&#x7F6E;&#x3002;&#x9019;&#x500B;&#x7A31;&#x70BA;&#x5206;&#x5272;&#xFF08;partition&#xFF09;&#x64CD;&#x4F5C;&#x3002;</li>
<li>&#x905E;&#x8FF4;&#x5730;&#xFF08;recursively&#xFF09;&#x628A;&#x5C0F;&#x65BC;&#x57FA;&#x6E96;&#x503C;&#x5143;&#x7D20;&#x7684;&#x5B50;&#x6578;&#x5217;&#x548C;&#x5927;&#x65BC;&#x57FA;&#x6E96;&#x503C;&#x5143;&#x7D20;&#x7684;&#x5B50;&#x6578;&#x5217;&#x6392;&#x5E8F;&#x3002;</li>
</ol>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">quicksort(<span class="type">List</span>(<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">9</span>, <span class="number">10</span>))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">List</span>[<span class="type">Int</span>] = {</span><br><span class="line">  list <span class="keyword">match</span> {</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="type">Nil</span></span><br><span class="line">    <span class="keyword">case</span> h :: <span class="type">Nil</span> =&gt; <span class="type">List</span>(h)</span><br><span class="line">    <span class="keyword">case</span> h :: t =&gt; quicksort(t.filter(_ &lt;= h)) ::: h :: quicksort(t.filter(_ &gt; h))</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x5BEB;&#x51FA;&#x8CBB;&#x6C0F;&#x6578;&#x5217;"><a href="#&#x5BEB;&#x51FA;&#x8CBB;&#x6C0F;&#x6578;&#x5217;" class="headerlink" title="&#x5BEB;&#x51FA;&#x8CBB;&#x6C0F;&#x6578;&#x5217;"></a>&#x5BEB;&#x51FA;&#x8CBB;&#x6C0F;&#x6578;&#x5217;</h2><p>&#x4F55;&#x8B02;&#x8CBB;&#x6C0F;&#x6578;&#x5217;&#xFF1A;<a href="https://zh.wikipedia.org/wiki/%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97" target="_blank" rel="noopener">&#x8CBB;&#x6C0F;&#x6578;&#x5217;</a></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fib(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span></span>(n: <span class="type">Int</span>): <span class="type">Int</span> = {</span><br><span class="line">  n <span class="keyword">match</span> {</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span> =&gt; <span class="number">0</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span> =&gt; <span class="number">1</span></span><br><span class="line">    <span class="keyword">case</span> _ =&gt; fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x7D93;&#x904E;&#x5E7E;&#x6B21;&#x7684;&#x7DF4;&#x7FD2;&#xFF0C;&#x6211;&#x5011;&#x61C9;&#x8A72;&#x5927;&#x6982;&#x53EF;&#x4EE5;&#x6162;&#x6162;&#x638C;&#x63E1;&#x5230;&#x600E;&#x9EBC;&#x904B;&#x7528;&#x905E;&#x8FF4;&#x4F86;&#x9054;&#x5230;&#x8FF4;&#x5708;&#x76EE;&#x7684;&#x3002;</p>
<ol>
<li>&#x5148;&#x628A;&#x4E3B;&#x8981;&#x908F;&#x8F2F;&#x5BEB;&#x51FA;&#x4F86;</li>
<li>&#x518D;&#x628A;&#x908A;&#x754C;&#x689D;&#x4EF6;&#x8A2D;&#x597D;&#xFF0C;&#x6C92;&#x6709;&#x908A;&#x754C;&#x689D;&#x4EF6;&#x5C31;&#x6703;&#x7121;&#x7AAE;&#x7684;&#x8DD1;&#x4E0B;&#x53BB;&#x2026;<br>&#x905E;&#x8FF4;&#x4E3B;&#x8981;&#x662F;&#x900F;&#x904E;&#x81EA;&#x6211;&#x547C;&#x53EB;&#xFF0C;&#x628A;&#x6BCF;&#x4E00;&#x6B65;&#x7684;&#x72C0;&#x614B;&#x653E;&#x5728; <code>stack</code>&#xFF0C;&#x7B49;&#x8D70;&#x5230;&#x908A;&#x754C;&#x56DE;&#x50B3;&#x908A;&#x754C;&#x503C;&#x6216;&#x5B8C;&#x6210;&#x908A;&#x754C;&#x689D;&#x4EF6;&#x5F8C;&#xFF0C;&#x518D;&#x56DE;&#x6EAF;&#x56DE;&#x53BB;&#x3002;</li>
</ol>
<p>&#x628A;&#x554F;&#x984C;&#x900F;&#x904E;<a href="https://zh.wikipedia.org/wiki/%E5%88%86%E6%B2%BB%E6%B3%95" target="_blank" rel="noopener">Divide and conquer</a>&#x65B9;&#x5F0F;&#xFF0C;<br>&#x5927;&#x554F;&#x984C;&#x5206;&#x89E3;&#x6210;&#x6578;&#x500B;&#x5C0F;&#x554F;&#x984C;&#xFF0C;&#x82E5;&#x5C0F;&#x554F;&#x984C;&#x898F;&#x6A21;&#x8F03;&#x5C0F;&#x4E14;&#x6613;&#x65BC;&#x89E3;&#x6C7A;&#x6642;&#xFF0C;&#x5247;&#x76F4;&#x63A5;&#x89E3;&#x3002;&#x5426;&#x5247;&#xFF0C;&#x905E;&#x6B78;&#x5730;&#x89E3;&#x6C7A;&#x5404;&#x5C0F;&#x554F;&#x984C;&#x3002;<br>&#x6700;&#x5F8C;&#x518D;&#x5C07;&#x6BCF;&#x500B;&#x5C0F;&#x554F;&#x984C;&#x7684;&#x7D50;&#x679C;&#x9010;&#x4E00;&#x5408;&#x4F75;&#x8D77;&#x4F86;&#x3002;</p>
<p>&#x905E;&#x8FF4;&#x7684;&#x5BEB;&#x6CD5;&#x5F88;&#x7C21;&#x6F54;&#xFF0C;&#x4F46;&#x662F;&#x6700;&#x5927;&#x7684;&#x554F;&#x984C;&#x662F;&#x6548;&#x80FD;&#x4E0D;&#x597D;&#x548C;&#x5BB9;&#x6613; <code>Stack Overflow</code>&#x3002;<br>&#x4E3B;&#x8981;&#x539F;&#x56E0;&#x662F;&#x6703;&#x53BB;&#x5617;&#x8A66;&#x8D70;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x8DEF;&#x5F91;&#x800C;&#x4E14;&#x628A;&#x6BCF;&#x4E00;&#x500B;&#x72C0;&#x614B;&#x653E;&#x5728;stack&#xFF0C;&#x7576;&#x72C0;&#x614B;&#x4E00;&#x591A;&#x5C31;&#x7206;&#x4E86;&#x3002;<br>&#x53BB;&#x5617;&#x8A66;&#x8D70;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x8DEF;&#x5F91;&#x4E5F;&#x662F;&#x9020;&#x6210;&#x6548;&#x80FD;&#x4E0D;&#x597D;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<p>&#x5047;&#x5982;&#xFF1A;</p>
<ol>
<li>&#x53BB;&#x5617;&#x8A66;&#x8D70;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x8DEF;&#x5F91;&#x4E0D;&#x591A;&#xFF0C;&#x4F46;&#x662F;&#x6BCF;&#x4E00;&#x500B;&#x6B65;&#x8A08;&#x7B97;&#x5F88;&#x82B1;&#x6642;&#x9593;&#xFF0C;&#x905E;&#x8FF4;&#x5BB9;&#x6613;&#x8F49;&#x63DB;&#x6210;&#x975E;&#x540C;&#x6B65;&#x7A0B;&#x5F0F;&#x3002;</li>
</ol>
<p>&#x4EE5;&#x6392;&#x5E8F;&#x70BA;&#x4F8B;&#xFF0C;&#x4E00;&#x500B;&#x4E32;&#x5217;&#x6578;&#x91CF;&#x5C0F;&#x65BC;&#x4E00;&#x5343;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="https://zh.wikipedia.org/wiki/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F" target="_blank" rel="noopener">Insertion Sort</a>&#xFF1B;&#x5927;&#x65BC;&#x4E00;&#x5343;&#x6539;&#x4F7F;&#x7528;Quicksort&#xFF1A;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">List</span>[<span class="type">Int</span>] = {</span><br><span class="line">  <span class="keyword">if</span>(list.length &lt; <span class="number">1000</span>){</span><br><span class="line">    <span class="comment">// &#x9700;&#x8981;&#x5927;&#x91CF;&#x6642;&#x9593;&#x8A08;&#x7B97;&#x624D;&#x53EF;&#x4EE5;&#x5F97;&#x51FA;&#x7D50;&#x679C;</span></span><br><span class="line">    insertionSort(list)</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">else</span>{</span><br><span class="line">    list <span class="keyword">match</span> {</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="type">Nil</span></span><br><span class="line">      <span class="keyword">case</span> h :: <span class="type">Nil</span> =&gt; <span class="type">List</span>(h)</span><br><span class="line">      <span class="keyword">case</span> h :: t =&gt; sort(t.filter(_ &lt;= h)) ::: h :: sort(t.filter(_ &gt; h))</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x8F15;&#x6613;&#x5C07;&#x5B83;&#x8F49;&#x63DB;&#x6210;&#x975E;&#x540C;&#x6B65;&#x7A0B;&#x5F0F;&#x3002;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(list: <span class="type">List</span>[<span class="type">Int</span>]): <span class="type">Future</span>[<span class="type">List</span>[<span class="type">Int</span>]] = {</span><br><span class="line">  <span class="keyword">if</span>(list.length &lt; <span class="number">1000</span>){</span><br><span class="line">    <span class="comment">// &#x9700;&#x8981;&#x5927;&#x91CF;&#x6642;&#x9593;&#x8A08;&#x7B97;&#x624D;&#x53EF;&#x4EE5;&#x5F97;&#x51FA;&#x7D50;&#x679C; </span></span><br><span class="line">    <span class="type">Future</span>(insertionSort(list))</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">else</span>{</span><br><span class="line">    list <span class="keyword">match</span> {</span><br><span class="line">      <span class="keyword">case</span> <span class="type">Nil</span> =&gt; <span class="type">Future</span>(<span class="type">Nil</span>)</span><br><span class="line">      <span class="keyword">case</span> h :: <span class="type">Nil</span> =&gt; <span class="type">Future</span>(<span class="type">List</span>(h))</span><br><span class="line">      <span class="keyword">case</span> h :: t =&gt; <span class="type">Future</span>(sort(t.filter(_ &lt;= h)) ::: h :: sort(t.filter(_ &gt; h)))</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x975E;&#x905E;&#x8FF4;&#x7684;&#x7248;&#x672C;&#x5C31;&#x5F88;&#x96E3;&#x6539;&#x4E86;&#xFF0C;&#x56E0;&#x70BA;&#x4E3B;&#x8981;&#x5B58;&#x5728;&#x5171;&#x4EAB;&#x7684;mutable&#x8B8A;&#x6578;&#xFF0C;&#x591A;&#x500B;thread&#x6703;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x500B;&#x8B8A;&#x6578;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x505A;&#x540C;&#x6B65;&#x8655;&#x7406;&#x3002;<br>&#x540C;&#x6B65;&#x554F;&#x984C;&#x6C92;&#x6709;&#x5C0F;&#x5FC3;&#x8655;&#x7406;&#xFF0C;&#x7D50;&#x679C;&#x5F88;&#x5BB9;&#x6613;&#x51FA;&#x932F;&#x3002;</p>
<ol>
<li>&#x5617;&#x8A66;&#x8D70;&#x6240;&#x6709;&#x53EF;&#x80FD;&#x7684;&#x8DEF;&#x5F91;&#x5F88;&#x591A;</li>
</ol>
<p>&#x4F8B;&#x5982;&#xFF1A;&#x8A08;&#x7B97;&#x7B2C;&#x4E94;&#x5341;&#x500B;&#x8CBB;&#x6C0F;&#x6578;&#x5217;<br>&#x6839;&#x64DA;&#x8A08;&#x7B97;&#x8CBB;&#x6C0F;&#x6578;&#x5217;&#x7684;&#x905E;&#x8FF4;&#x516C;&#x5F0F;&#xFF0C;<code>n = 50</code> &#x7684;&#x6A39;&#x72C0;&#x7D50;&#x69CB;&#x6703;&#x76F8;&#x7576;&#x5927;&#x3002;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x900F;&#x904E; <a href="http://localhost:4000/2016/12/09/Scala-Tail-recursion/" target="_blank" rel="noopener">Tail recursion</a> &#x4F86;&#x89E3;&#x6C7A;&#x3002;<br>&#x628A;&#x4E0A;&#x4E00;&#x500B;&#x72C0;&#x614B;&#x7684;&#x7D50;&#x679C;&#x76F4;&#x63A5;&#x7576;&#x6210;&#x5E36;&#x5165;&#x53C3;&#x6578;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F9D;&#x8CF4;&#x4E0A;&#x4E00;&#x500B;&#x72C0;&#x614B;&#x7684;&#x7D50;&#x679C;&#x3002;</p>
<p>&#x56E0;&#x70BA; <code>fib(n) = fib(n - 1) + fib(n - 2)</code>&#xFF0C;&#x5047;&#x5982;&#x53EF;&#x4EE5;&#x628A; <code>fib(n - 1)</code> &#x548C; <code>fib(n - 2)</code> &#x7576;&#x53C3;&#x6578;&#x5E36;&#x5165;&#xFF0C;<br>&#x9019;&#x6A23;&#x5C31;&#x53EF;&#x4EE5;&#x99AC;&#x4E0A;&#x5F97;&#x51FA; <code>fib(n)</code>&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7B49;&#x7B97;&#x5B8C; <code>fib(n - 1)</code> &#x548C; <code>fib(n - 2)</code> &#x5F8C;&#x624D;&#x53EF;&#x4EE5;&#x5F97;&#x51FA; <code>fib(n)</code>&#x3002;</p>
<pre><code class="scala"><span class="keyword">import</span> scala.annotation.tailrec

fib(<span class="number">0</span>, <span class="number">1</span>, <span class="number">5</span>)

<span class="meta">@tailrec</span>
<span class="function"><span class="keyword">def</span> <span class="title">fib</span></span>(previous: <span class="type">Int</span>, current: <span class="type">Int</span>, n: <span class="type">Int</span>): <span class="type">Int</span> = {
  n <span class="keyword">match</span> {
    <span class="keyword">case</span> <span class="number">0</span> =&gt; previous
    <span class="keyword">case</span> <span class="number">1</span> =&gt; current
    <span class="keyword">case</span> _ =&gt; fib(current, previous + current, n - <span class="number">1</span>)
  }
}
</code></pre>
<p>&#x6709;&#x8208;&#x8DA3;&#x7684;&#x8B80;&#x8005;&#x53EF;&#x4EE5;&#x5230; <a href="https://scalataiwan.github.io/ScalaKitchen/recursive.html" target="_blank" rel="noopener">ScalaKitchen</a> &#x8A66;&#x73A9;&#x770B;&#x770B;&#xFF0C;&#x4E5F;&#x6709;&#x63D0;&#x4F9B;<a href="https://scalataiwan.github.io/ScalaKitchen/" target="_blank" rel="noopener">&#x4E2D;&#x6587;&#x7248;&#x672C;&#x7684;Scala&#x5165;&#x9580;&#x6559;&#x5B78;</a>&#x3002;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2017/02/15/Scala-Use-Either-Try-to-hand-error/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/15/Scala-Use-Either-Try-to-hand-error/" itemprop="url">
                  [Scala] Use Either to hand error cases
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-15T16:57:00+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Scala/" itemprop="url" rel="index">
                    <span itemprop="name">Scala</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/15/Scala-Use-Either-Try-to-hand-error/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/02/15/Scala-Use-Either-Try-to-hand-error/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;OOP&#x7684;&#x8A9E;&#x8A00;&#x4E2D;&#xFF0C;&#x6211;&#x5011;exception&#x4F86;&#x8868;&#x9054;&#x7A0B;&#x5F0F;&#x932F;&#x8AA4;&#x6216;&#x662F;&#x7CFB;&#x7D71;crash&#xFF0E;Exception&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x70BA;<code>Checked Exception</code> &#x548C; <code>UnChecked Excpetion</code>&#xFF0E;</p>
<ul>
<li><p>Checked Exception: &#x6703;&#x5C07;&#x8981;&#x4E1F;&#x51FA;&#x7684;excpetion&#x5BEB;&#x5728;function&#x7684;signature&#xFF0E;<br>&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">interface <span class="type">Foo</span>() <span class="keyword">throws</span> <span class="type">XXXException</span>, <span class="type">YYYException</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>UnChecked Excpetion: &#x8981;&#x4E1F;&#x51FA;&#x7684;excpetion&#x4E0D;&#x6703;&#x5BEB;&#x5728;function&#x7684;signature&#xFF0C;&#x547C;&#x53EB;function&#x7684;&#x4EBA;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6709;exception&#x8981;&#x8655;&#x7406;&#xFF0E;</p>
</li>
</ul>
<p>Checked Exception&#x6703;&#x9055;&#x53CD;<a href="https://en.wikipedia.org/wiki/Open/closed_principle" target="_blank" rel="noopener">Open/Closed Principle</a>&#xFF0C;&#x7576;&#x6709;&#x65B0;&#x589E;&#x4E1F;&#x51FA;&#x7684;excpetion&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;interface signature&#xFF1B;UnChecked Excpetion&#x5247;&#x662F;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;exception&#x9700;&#x8981;&#x8655;&#x7406;&#xFF0E;</p>
<p>&#x9019;&#x5169;&#x7A2E;exception&#x5B70;&#x597D;&#x5B70;&#x58DE;&#xFF0C;&#x5728; <code>Clean code: a handbook of agile software craftsmanship, Robert C. Martin</code> &#x6709;&#x63D0;&#x5230;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">The debate is over. For years Java programmers have debated over the benefits and liabilities of checked exceptions. When checked exceptions were introduced in the first version of Java, they seemed like a great idea. The signature of every method would list all of the exceptions that it could pass to its caller. Moreover, these exceptions were part of the type</span><br><span class="line">of the method. Your code literally wouldn&apos;t compile if the signature didn&apos;t match what your code could do.</span><br><span class="line"></span><br><span class="line">At the time, we thought that checked exceptions were a great idea; and yes, they can yield some benefit. However, it is clear now that they aren&apos;t necessary for the production of robust software. C# doesn&apos;t have checked exceptions, and despite valiant attempts, C++ doesn&apos;t either. Neither do Python or Ruby. Yet it is possible to write robust software in all of these languages. Because that is the case, we have to decide&#x2014;really&#x2014;whether checked exceptions are worth their price.</span><br><span class="line"></span><br><span class="line">Checked exceptions can sometimes be useful if you are writing a critical library: You must catch them. But in general application development the dependency costs outweigh the benefits</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;Java&#x4E2D;&#x5EFA;&#x8B70;&#x4F7F;&#x7528;UnChecked Excpetion&#xFF0C;&#x4F46;&#x662F;&#x9019;&#x6703;&#x5C0E;&#x81F4;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x707D;&#x96E3;&#x2026;</p>
<ol>
<li>&#x547C;&#x53EB;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x6703;&#x4E1F;&#x51FA;exception</li>
<li>&#x547C;&#x53EB;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;excpetion&#x8981;&#x8655;&#x7406;&#xFF0C;&#x7576;call chain&#x5F88;&#x6DF1;&#x7684;&#x6642;&#x5019;&#x66F4;&#x662F;&#x7CDF;&#x7CD5;&#x2026;</li>
<li>&#x5230;&#x8655;&#x5145;&#x6EFF;&#x4E86; <code>try{...} catch{...}</code></li>
</ol>
<p>&#x76F8;&#x4FE1;&#x4F7F;&#x7528;Java&#x958B;&#x767C;&#x7684;&#x5DE5;&#x7A0B;&#x5E2B;&#x61C9;&#x8A72;&#x611F;&#x89F8;&#x826F;&#x591A;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x7DAD;&#x8B77;&#x820A;&#x5C08;&#x6848;&#xFF0E;&#x4E00;&#x500B;call chain&#x9577;&#x9054;&#x5341;&#x5E7E;&#x5C64;&#xFF0C;&#x6BCF;&#x4E00;&#x5C64;&#x4E1F;&#x7684;excpetion&#x90FD;&#x4E0D;&#x4E00;&#x6A23;&#xFF0C;&#x6709;&#x4E9B;&#x5C64;&#x6703;&#x8655;&#x7406;exception&#xFF0C;&#x6709;&#x4E9B;&#x53C8;&#x4E0D;&#x6703;&#xFF0C;&#x6700;&#x5F8C;&#x7684;&#x5927;&#x7D55;&#x62DB;&#x5C31;&#x662F;&#x6BCF;&#x4E00;&#x5C64;&#x90FD;&#x52A0; <code>try{...} catch{...}</code>&#xFF0E;</p>
<p>&#x4F8B;&#x5916;&#x8655;&#x7406;&#x5728;OOP&#x662F;&#x4E00;&#x500B;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x8B70;&#x984C;&#xFF0C;&#x6C92;&#x6709;&#x8B39;&#x614E;&#x8655;&#x7406;&#x5F88;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x7DAD;&#x8B77;&#x56F0;&#x96E3;&#x548C;&#x767C;&#x751F;&#x554F;&#x984C;&#x4E0D;&#x5BB9;&#x6613;&#x627E;&#x5230;&#x554F;&#x984C;&#x9EDE;&#xFF0E;<br>&#x56E0;&#x70BA;Exception&#x662F;&#x6709;side effect&#xFF0C;&#x5728;FP&#x662F;&#x4E0D;&#x88AB;&#x51C6;&#x8A31;&#x7684;&#xFF0E;&#x6240;&#x4EE5;&#x5728;pure FP&#x7A0B;&#x5F0F;&#x4E2D;&#x662F;&#x770B;&#x4E0D;&#x5230;excpetion&#x548C; <code>try{...} catch{...}</code>&#xFF0E;</p>
<h1 id="Either"><a href="#Either" class="headerlink" title="Either"></a>Either</h1><p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x900F;&#x904E; <code>Either</code> &#x4F86;&#x9054;&#x6210;&#xFF0C;<code>Left</code> &#x653E;&#x932F;&#x8AA4;&#x7684;&#x7269;&#x4EF6;&#xFF0C;<code>Right</code> &#x653E;&#x6B63;&#x78BA;&#x7684;&#x7269;&#x4EF6;&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Either</span>[<span class="type">A</span>, <span class="type">B</span>]</span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">Left</span>[+<span class="type">A</span>, +<span class="type">B</span>](<span class="params">a: <span class="type">A</span></span>) <span class="keyword">extends</span> <span class="title">Either</span>[<span class="type">A</span>, <span class="type">B</span>]</span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">Right</span>[+<span class="type">A</span>, +<span class="type">B</span>](<span class="params">b: <span class="type">B</span></span>) <span class="keyword">extends</span> <span class="title">Either</span>[<span class="type">A</span>, <span class="type">B</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">//</span> <span class="title">for</span> <span class="title">exmple</span></span></span><br><span class="line"><span class="class"><span class="title">type</span> <span class="title">Error</span> </span>= <span class="type">String</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> result = <span class="type">Right</span>[<span class="type">Error</span>, <span class="type">Int</span>](<span class="number">123</span>)</span><br><span class="line"><span class="keyword">val</span> error = <span class="type">Left</span>[<span class="type">Error</span>, <span class="type">Int</span>](<span class="string">&quot;Something wrong!!!&quot;</span>)</span><br></pre></td></tr></table></figure></p>
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x628A;&#x6B63;&#x78BA;&#x7684;&#x7D50;&#x679C;&#x6216;&#x932F;&#x8AA4;&#x653E;&#x5230; <code>Either</code> &#x9019;&#x500B;&#x5BB9;&#x5668;&#xFF0C;&#x547C;&#x53EB;&#x8005;&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x77E5;&#x9053;&#x6709;&#x9700;&#x8981;&#x8655;&#x7406;&#x932F;&#x8AA4;&#x60C5;&#x6CC1;&#xFF0C;&#x518D;&#x4F86;&#x7A0B;&#x5F0F;&#x78BC;&#x4E0D;&#x518D;&#x5230;&#x8655;&#x5145;&#x65A5; <code>try{...} catch{...}</code>&#xFF0E;</p>
<p>&#x6211;&#x5011;&#x4F7F;&#x7528;&#x56DB;&#x5247;&#x904B;&#x7B97;&#x4F86;&#x7576;&#x7BC4;&#x4F8B;&#xFF0C;&#x5982;&#x4F55;&#x4F7F;&#x7528; <code>Either</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">div</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</span><br><span class="line">  <span class="keyword">if</span>(b == <span class="number">0</span>) <span class="type">Left</span>[<span class="type">String</span>, <span class="type">Double</span>](<span class="string">&quot;Can&apos;t divide by 0 !!!&quot;</span>)</span><br><span class="line">  <span class="keyword">else</span> <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a / b)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</span><br><span class="line">  <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a + b)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">minus</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</span><br><span class="line">  <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a - b)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mul</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</span><br><span class="line">  <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a * b)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// ((((1 + 2) * 3) / 4) - 5)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> result = <span class="keyword">for</span> {</span><br><span class="line">  r1 &lt;- add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">  r2 &lt;- mul(r1, <span class="number">3</span>)</span><br><span class="line">  r3 &lt;- div(r2, <span class="number">4</span>)</span><br><span class="line">  r4 &lt;- minus(r3, <span class="number">5</span>)</span><br><span class="line">} <span class="keyword">yield</span> {</span><br><span class="line">  r4</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// result: scala.util.Either[String,Double] = Right(-2.75)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ((((1 + 2) * 3) / 0) - 5)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> result = <span class="keyword">for</span> {</span><br><span class="line">  r1 &lt;- add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">  r2 &lt;- mul(r1, <span class="number">3</span>)</span><br><span class="line">  r3 &lt;- div(r2, <span class="number">0</span>)</span><br><span class="line">  r4 &lt;- minus(r3, <span class="number">5</span>)</span><br><span class="line">} <span class="keyword">yield</span> {</span><br><span class="line">  r4</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// result: scala.util.Either[String,Double] = Left(Can&apos;t divide by 0 !!!)</span></span><br></pre></td></tr></table></figure></p>
<p>&#x6839;&#x64DA;&#x4E0A;&#x9762;&#x7C21;&#x55AE;&#x7684;&#x7BC4;&#x4F8B;&#xFF0C;&#x9019;&#x6A23;&#x7684;&#x5BEB;&#x6CD5;&#x5F88;&#x660E;&#x986F;&#x512A;&#x65BC;&#x50B3;&#x7D71;OOP&#x7528;excpetion&#x4F86;&#x8655;&#x7406;&#x932F;&#x8AA4;&#xFF1A;</p>
<ul>
<li>&#x4E0D;&#x518D;&#x6709; <code>try{...} catch{...}</code> &#x5145;&#x65A5;&#x5728;&#x6BCF;&#x500B;&#x5730;&#x65B9;&#xFF0E;</li>
<li>&#x547C;&#x53EB;&#x8005;&#x53EF;&#x4EE5;&#x6839;&#x64DA;fucntion signature&#x77E5;&#x9053;&#x662F;&#x5426;&#x6703;&#x7522;&#x751F;&#x932F;&#x8AA4;&#xFF0E;</li>
<li>&#x66F4;&#x53EF;&#x4EE5;&#x5C08;&#x5FC3;&#x5728;&#x5546;&#x696D;&#x908F;&#x8F2F;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x82B1;&#x591A;&#x9918;&#x7684;&#x5FC3;&#x529B;&#x5728;&#x8655;&#x7406;&#x4F8B;&#x5916;&#xFF0E;</li>
</ul>
<h1 id="Try"><a href="#Try" class="headerlink" title="Try"></a>Try</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Try</span>[+<span class="type">T</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">Failure</span>[+<span class="type">T</span>](<span class="params">exception: <span class="type">Throwable</span></span>) <span class="keyword">extends</span> <span class="title">Try</span>[<span class="type">T</span>] </span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">Success</span>[+<span class="type">T</span>](<span class="params">value: <span class="type">T</span></span>) <span class="keyword">extends</span> <span class="title">Try</span>[<span class="type">T</span>]</span></span><br></pre></td></tr></table></figure>
<p><code>Try</code> &#x4E5F;&#x662F;&#x985E;&#x4F3C;&#x65BC; <code>Either</code> &#x7684;context&#xFF0C;&#x6709;&#x8208;&#x8DA3;&#x7684;&#x8B80;&#x8005;&#x53EF;&#x4EE5;&#x8A66;&#x7528;&#x770B;&#x770B;&#xFF0E;&#x5728;&#x5BE6;&#x52D9;&#x4E0A;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x63A1;&#x7528; <code>Either</code>&#xFF0C;&#x4E0D;&#x63A1;&#x7528; <code>Try</code>&#x7684;&#x539F;&#x56E0;&#x662F;&#xFF1A;</p>
<ul>
<li>&#x6C92;&#x6709;&#x8FA6;&#x6CD5;&#x5C0D;exception&#x505A; <code>exhaustive pattern match</code>&#xFF0C;&#x7576;&#x662F;Failure&#x7684;&#x6642;&#x5019;&#xFF0C;&#x547C;&#x53EB;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;exception&#x6703;&#x4E1F;&#x51FA;&#xFF0C;&#x53EA;&#x77E5;&#x9053;&#x6703;&#x4E1F;&#x51FA;&#x4E00;&#x500B; <code>Throwable class</code>&#xFF0E;</li>
</ul>
<p>&#x4F7F;&#x7528; <code>Either</code> &#x6211;&#x5011;&#x53EF;&#x4EE5;&#x81EA;&#x8A02;Error type&#xFF0C;&#x7576;&#x5931;&#x6557;&#x6642;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x5C0D;Error type&#x505A; <code>exhaustive pattern match</code>&#xFF0C;&#x4F9D;&#x64DA;&#x4E0D;&#x540C;&#x7684;&#x932F;&#x8AA4;&#x505A;&#x4E0D;&#x540C;&#x7684;&#x8655;&#x7406;&#xFF0E;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/20/Scala-How-to-use-Option-correctly/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/20/Scala-How-to-use-Option-correctly/" itemprop="url">
                  [Scala] How to use Option correctly
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-20T15:13:00+08:00">
                2016-12-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Scala/" itemprop="url" rel="index">
                    <span itemprop="name">Scala</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/20/Scala-How-to-use-Option-correctly/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/20/Scala-How-to-use-Option-correctly/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5C0D;&#x65BC;Scala&#x6211;&#x4E00;&#x76F4;&#x628A;&#x5B83;&#x7576;&#x6210;&#x9032;&#x968E;&#x7248;&#x672C;&#x7684;Java&#xFF0C;&#x7576;&#x8D8A;&#x4F86;&#x8D8A;&#x4E86;&#x89E3;Functional Programming&#x7684;&#x7CBE;&#x795E;&#xFF0C;&#x624D;&#x767C;&#x73FE;&#x4E4B;&#x524D;&#x60F3;&#x6CD5;&#x9084;&#x883B;&#x5929;&#x771F;&#x7684;&#xFF0E;</p>
<p>&#x53EF;&#x4EE5;&#x5F9E;&#x5982;&#x4F55;&#x6B63;&#x78BA;&#x4F7F;&#x7528; <code>Option</code> &#xFF0C;&#x8B93;&#x6211;&#x5011;&#x6162;&#x6162;&#x4F86;&#x9032;&#x5165;Functional Programming&#x7684;&#x4E16;&#x754C;&#xFF0E;</p>
<p>&#x5148;&#x5F9E;&#x4E00;&#x500B;&#x7C21;&#x55AE;&#x7684;API&#x5BE6;&#x4F8B;&#x4F86;&#x958B;&#x59CB;&#xFF1A; &#x5047;&#x5982;&#x6709;&#x4E00;&#x500B;API&#xFF0C;Admin&#x4F7F;&#x7528;&#x8005;&#x53EF;&#x4EE5;&#x627E;&#x51FA;&#x67D0;&#x500B;&#x570B;&#x5BB6;&#x7684;&#x6240;&#x6709;&#x4F7F;&#x7528;&#x8005;&#xFF1B;&#x4E0D;&#x662F;Admin&#x4F7F;&#x7528;&#x8005;&#x5C31;&#x56DE;&#x50B3;&#x7A7A;&#x5B57;&#x4E32;&#xFF0E;</p>
<p>&#x4F7F;&#x7528;&#x8005;&#x6703;&#x5E36;&#x4E0A; <code>userName</code> , <code>password</code> &#x548C; <code>country</code> &#x547C;&#x53EB;&#x6B64;API&#xFF0C;&#x9019;&#x500B;API&#x6703;</p>
<ol>
<li>&#x6AA2;&#x67E5;&#x683C;&#x5F0F;&#x662F;&#x5426;&#x6B63;&#x78BA;</li>
<li>&#x67E5;&#x8A62;&#x8CC7;&#x6599;&#x5EAB;&#x662F;&#x5426;&#x6709;&#x4F7F;&#x7528;&#x8005;</li>
<li>&#x82E5;&#x6709;&#xFF0C;&#x6AA2;&#x67E5; <code>userType</code> &#x4F7F;&#x5426;&#x70BA; <code>Admin</code></li>
<li>&#x6839;&#x64DA; <code>country</code> &#x53BB;&#x8CC7;&#x6599;&#x5EAB;&#x6488;&#x53D6;&#x8A72;&#x570B;&#x5BB6;&#x7684;&#x6240;&#x6709;&#x4F7F;&#x7528;&#x8005;</li>
<li>&#x5C07;&#x7D50;&#x679C;&#x8F49;&#x6210; <code>json</code> &#x653E;&#x5230; http response</li>
</ol>
<p>&#x5148;&#x5B9A;&#x7FA9; <code>Data Type</code>&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">sealed</span> <span class="class"><span class="keyword">trait</span> <span class="title">Name</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">UserName</span>(<span class="params">name: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Name</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">sealed</span> <span class="title">trait</span> <span class="title">Password</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">MD5Password</span>(<span class="params">plainText: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">Password</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">sealed</span> <span class="title">trait</span> <span class="title">Country</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">object</span> <span class="title">TAIWAN</span> <span class="keyword">extends</span> <span class="title">Country</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">object</span> <span class="title">CHINA</span> <span class="keyword">extends</span> <span class="title">Country</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">sealed</span> <span class="title">trait</span> <span class="title">UserType</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">object</span> <span class="title">ADMIN</span> <span class="keyword">extends</span> <span class="title">UserType</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">object</span> <span class="title">EMAIL</span> <span class="keyword">extends</span> <span class="title">UserType</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">object</span> <span class="title">PHONE</span> <span class="keyword">extends</span> <span class="title">UserType</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">sealed</span> <span class="title">trait</span> <span class="title">Account</span> </span>{</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">String</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountWithCredential</span>(<span class="params">name: <span class="type">UserName</span>, password: <span class="type">Password</span>, userType: <span class="type">UserType</span></span>) <span class="keyword">extends</span> <span class="title">Account</span></span></span><br><span class="line"><span class="class"><span class="title">final</span> <span class="title">case</span> <span class="title">class</span> <span class="title">AccountWithProfile</span>(<span class="params">name: <span class="type">UserName</span>, country: <span class="type">Country</span>, age: <span class="type">Int</span></span>) <span class="keyword">extends</span> <span class="title">Account</span></span></span><br></pre></td></tr></table></figure></p>
<p>&#x9019;&#x6A23;&#x7684; <code>Data Type</code> &#x4E5F;&#x662F;&#x6240;&#x8B02;&#x7684; <code>Algebraic Type</code>&#xFF0C;<br>&#x4EE5; <code>Account</code> &#x70BA;&#x4F8B;&#xFF1A;</p>
<ul>
<li>&#x5B83;&#x6709;&#x5169;&#x7A2E; subtype <code>AccountWithCredential</code> &#x548C; <code>AccountWithProfile</code>&#xFF0C;&#x70BA; <code>Account</code> &#x7684; <code>Sum Type</code></li>
<li>&#x5404;&#x7A2E;&#x4E0D;&#x540C; subtype &#x6709;&#x5B83;&#x5011;&#x7684;&#x53C3;&#x6578;&#xFF0C;&#x4E5F;&#x7A31;&#x4E4B;  <code>Product Type</code></li>
</ul>
<p>&#x9019;&#x7A2E;&#x5B9A;&#x7FA9;&#x65B9;&#x5F0F;&#x6709;&#x9EDE;&#x50CF;Java&#x4E16;&#x754C;&#x4E2D;&#x7684; <code>Value Object</code>&#xFF0C;&#x628A;&#x8CC7;&#x6599;&#x548C;&#x884C;&#x70BA;&#x5206;&#x958B;&#x662F;&#x6709;&#x597D;&#x8655;&#x7684;&#xFF0C;&#x907F;&#x514D;&#x8CC7;&#x6599;&#x548C;&#x884C;&#x70BA;&#x8026;&#x5408;&#x904E;&#x7DCA;&#xFF0E;<a href="https://en.wikipedia.org/wiki/Software_design_pattern" target="_blank" rel="noopener">Design Pattern</a> &#x4E5F;&#x662F;&#x900F;&#x904E;pattern&#x53BB;&#x5206;&#x96E2;&#x8CC7;&#x6599;&#x548C;&#x884C;&#x70BA;&#xFF0E;</p>
<p>&#x518D;&#x4F86;&#x6211;&#x5011;&#x4F86;&#x5B9A;&#x7FA9;&#x884C;&#x70BA;&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Repo</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">login</span></span>(name: <span class="type">UserName</span>, password: <span class="type">Password</span>): <span class="type">Option</span>[<span class="type">AccountWithCredential</span>]</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getAccountsByCountry</span></span>(country: <span class="type">Country</span>): <span class="type">Option</span>[<span class="type">List</span>[<span class="type">AccountWithProfile</span>]]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Repo</span> <span class="keyword">extends</span> <span class="title">Repo</span> </span>{</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">login</span></span>(name: <span class="type">UserName</span>, password: <span class="type">Password</span>): <span class="type">Option</span>[<span class="type">AccountWithCredential</span>] = ???</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getAccountsByCountry</span></span>(country: <span class="type">Country</span>): <span class="type">Option</span>[<span class="type">List</span>[<span class="type">AccountWithProfile</span>]] = ???</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p><code>login</code> &#x7684;&#x56DE;&#x50B3;&#x503C;&#x70BA;&#x4E00;&#x500B; <code>Option</code> context&#xFF0C;&#x88E1;&#x9762;&#x88DD;&#x8457; <code>AccountWithCredential</code>&#xFF0E;</p>
<ul>
<li>&#x82E5;&#x6709;&#x627E;&#x5230;&#x5C31;&#x56DE;&#x50B3; <code>Some[AccountWithCredential]</code></li>
<li>&#x82E5;&#x6C92;&#x6709;&#x627E;&#x5C31;&#x56DE;&#x50B3; <code>None</code></li>
</ul>
<p>&#x5728; <code>Java 7</code> &#x4E4B;&#x524D;&#x7684;&#x7248;&#x672C;&#x6703;&#x5B9A;&#x7FA9;&#x627E;&#x4E0D;&#x5230;&#x6703;&#x56DE;&#x50B3; <code>Null</code>&#xFF0C;<code>Null</code> &#x6703;&#x9020;&#x6210;&#x8A9E;&#x610F;&#x4E0D;&#x6E05;&#x548C;&#x7A0B;&#x5F0F;&#x78BC;&#x5145;&#x65A5;&#x8457;&#x4E00;&#x5806;&#x6AA2;&#x67E5;&#x662F;&#x5426;&#x70BA; <code>Null</code> &#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0E;<br>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x900F;&#x904E; <a href="https://en.wikipedia.org/wiki/Null_Object_pattern" target="_blank" rel="noopener">Null Object pattern</a> &#x4F86;&#x89E3;&#x6C7A;&#x9019;&#x500B;&#x554F;&#x984C;&#xFF0E;<br>&#x5728; <code>Scala</code> &#x6216; <code>Java 8</code> &#x5247;&#x662F;&#x900F;&#x904E; <code>Option</code> / <code>Optional</code> data type&#x4F86;&#x89E3;&#x6C7A;&#x4E4B;&#xFF0E;</p>
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5BE6;&#x4F5C;API&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Api</span> <span class="keyword">extends</span> <span class="title">App</span> </span>{</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">Option</span>[<span class="type">UserName</span>] = parse(<span class="type">UserName</span>(args(<span class="number">0</span>)))</span><br><span class="line">  <span class="keyword">val</span> password: <span class="type">Option</span>[<span class="type">MD5Password</span>] = parse(<span class="type">MD5Password</span>(args(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Step1: login</span></span><br><span class="line">  <span class="comment">// Step2: check isAdmin == true</span></span><br><span class="line">  <span class="comment">// Step3: get accounts by country</span></span><br><span class="line">  <span class="comment">// Step4: convert accounts to json</span></span><br><span class="line">  <span class="comment">// Step5: add json to HttpResponse</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (name.isEmpty) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">RuntimeException</span>(<span class="string">&quot;bad id&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> (password.isEmpty) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">RuntimeException</span>(<span class="string">&quot;bad password&quot;</span>)</span><br><span class="line">  <span class="keyword">val</span> json: <span class="type">Option</span>[<span class="type">String</span>] = getJsonProfile(name.get, password.get, <span class="type">CHINA</span>)</span><br><span class="line">  <span class="keyword">if</span> (json.isDefined) {</span><br><span class="line">    returnHttpResponse(json.get)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    returnHttpResponse(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">parse</span></span>[<span class="type">A</span>](a: =&gt; <span class="type">A</span>): <span class="type">Option</span>[<span class="type">A</span>] = ???</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">getJsonProfile</span></span>(name: <span class="type">UserName</span>,</span><br><span class="line">                             password: <span class="type">Password</span>,</span><br><span class="line">                             country: <span class="type">Country</span>): <span class="type">Option</span>[<span class="type">String</span>] = {</span><br><span class="line">    <span class="keyword">val</span> accountWithCredential: <span class="type">Option</span>[<span class="type">AccountWithCredential</span>] =</span><br><span class="line">      <span class="type">Repo</span>.login(name, password)</span><br><span class="line">    <span class="keyword">if</span> (accountWithCredential.isDefined) {</span><br><span class="line">      accountWithCredential.get.userType <span class="keyword">match</span> {</span><br><span class="line">        <span class="keyword">case</span> <span class="type">ADMIN</span> =&gt;</span><br><span class="line">          <span class="keyword">val</span> accounts: <span class="type">Option</span>[<span class="type">List</span>[<span class="type">AccountWithProfile</span>]] =</span><br><span class="line">            <span class="type">Repo</span>.getAccountsByCountry(country)</span><br><span class="line">          <span class="keyword">if</span> (accounts.isDefined) {</span><br><span class="line">            listToJson(accounts.get)</span><br><span class="line">          } <span class="keyword">else</span> {</span><br><span class="line">            <span class="type">None</span></span><br><span class="line">          }</span><br><span class="line">        <span class="keyword">case</span> _: <span class="type">UserType</span> =&gt; <span class="type">None</span></span><br><span class="line">      }</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="type">None</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// convert a list of Account to json String</span></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">listToJson</span></span>[<span class="type">A</span>](list: <span class="type">List</span>[<span class="type">A</span>]): <span class="type">Option</span>[<span class="type">String</span>] = ???</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">returnHttpResponse</span></span>(message: <span class="type">String</span>): <span class="type">Unit</span> = ???</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x9019;&#x500B;&#x7248;&#x672C;&#x5229;&#x7528; <code>isDefined</code> &#x53BB;&#x5224;&#x5B9A;&#x662F;&#x5426;&#x70BA;&#x7A7A;&#x503C;&#xFF0C;&#x9019;&#x6A23;&#x7684;&#x5BEB;&#x6CD5;&#x8DDF;&#x4F7F;&#x7528; <code>Null</code> &#x7576;&#x56DE;&#x50B3;&#x503C;&#x4E00;&#x6A23;&#xFF0C;&#x5728;&#x9019;&#x500B;&#x7248;&#x672C;&#x5B8C;&#x5168;&#x770B;&#x4E0D;&#x51FA;&#x4F7F;&#x7528; <code>Option</code> &#x597D;&#x8655;&#xFF0C;&#x53CD;&#x800C;&#x986F;&#x5F97;&#x5197;&#x9918;&#xFF0E;</p>
<p>&#x6211;&#x5011;&#x6539;&#x5BEB;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x7248;&#x672C; <code>getJsonProfile</code> &#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">getJsonProfile</span></span>(name: <span class="type">UserName</span>, password: <span class="type">Password</span>, country: <span class="type">Country</span>): <span class="type">Option</span>[<span class="type">String</span>] = {</span><br><span class="line">    <span class="type">Repo</span>.login(name, password).flatMap(</span><br><span class="line">      account =&gt; {</span><br><span class="line">        <span class="keyword">if</span> (account.userType == <span class="type">ADMIN</span>) {</span><br><span class="line">          <span class="type">Repo</span>.getAccountsByCountry(country).flatMap(profiles =&gt; listToJson(profiles))</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="type">None</span></span><br><span class="line">      })</span><br><span class="line">  }</span><br></pre></td></tr></table></figure></p>
<p>&#x6211;&#x5011;&#x5229;&#x7528; <code>flatMap</code> &#x4F86;&#x5E6B;&#x4E32;&#x63A5;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5617;&#x8A66;&#x53D6;&#x5F97; <code>Option</code> &#x88E1;&#x9762;&#x7684;&#x503C;&#xFF0C;<code>Option</code> &#x7684; <code>flatMap</code> &#x7684; signature &#x70BA; <code>A =&gt; Option[B]</code>&#xFF0E;</p>
<p>&#x4F8B;&#x5982;&#xFF1A; <code>getAccountsByCountry</code> &#x9700;&#x4F9D;&#x8CF4; <code>login</code> &#x7684;&#x7D50;&#x679C;&#xFF0C;&#x624D;&#x53EF;&#x4EE5;&#x9032;&#x884C;&#x4E4B;&#x5F8C;&#x7684;&#x52D5;&#x4F5C;&#xFF0E;&#x6211;&#x5011;&#x662F;&#x900F;&#x904E; <code>flatMap</code> &#x5C07;&#x9019;&#x5169;&#x500B;&#x52D5;&#x4F5C;&#x4E32;&#x63A5;&#x8D77;&#x4F86;&#xFF0C;<br>&#x9019;&#x6A23;&#x5C31;&#x53EF;&#x4EE5;&#x907F;&#x514D;&#x4E00;&#x5806;&#x5197;&#x9918; <code>if else</code> &#x6AA2;&#x67E5;&#xFF0E;</p>
<p>&#x518D;&#x8209;&#x4E00;&#x500B;&#x62BD;&#x8C61;&#x7684;&#x4F8B;&#x5B50;&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">A</span></span>(a: <span class="type">A</span>): <span class="type">Option</span>[<span class="type">B</span>] = ???</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B</span></span>(b: <span class="type">B</span>): <span class="type">Option</span>[<span class="type">C</span>] = ???</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">C</span></span>(c: <span class="type">C</span>): <span class="type">Option</span>[<span class="type">D</span>] = ???</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">total</span></span>(input: <span class="type">Option</span>[<span class="type">A</span>]): <span class="type">Option</span>[<span class="type">D</span>] = {</span><br><span class="line">  input.flatMap(<span class="type">A</span>(_).flatMap(<span class="type">B</span>(_).flatMap(<span class="type">C</span>(_))))</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x53EF;&#x4EE5;&#x900F;&#x904E; <code>flatMap</code> &#x4E32;&#x63A5; <code>A</code>, <code>B</code>, <code>C</code> &#x9019;&#x4E09;&#x500B;function&#xFF0C;&#x5047;&#x5982;&#x7528; <code>isDefined</code> &#x4F86;&#x4E32;&#x63A5;&#xFF0C;&#x7A0B;&#x5F0F;&#x78BC;&#x7684;&#x53EF;&#x8B80;&#x6027;&#x548C;&#x7DAD;&#x8B77;&#x6027;&#x6703;&#x5927;&#x5E45;&#x4E0B;&#x964D;&#xFF0E;<br>&#x5728; <code>Function Programming</code>&#x4E2D;&#xFF0C;&#x5E38;&#x898B;&#x7684;pattern&#x6703;&#x5C07;&#x503C;&#x653E;&#x5230;&#x4E00;&#x500B;context&#x88E1;&#x9762;&#xFF0C;&#x5728;&#x4F7F;&#x7528;&#x6642;&#x5019;&#x4E26;&#x4E0D;&#x6703;&#x5C07;&#x503C;&#x53D6;&#x51FA;&#x4F86;&#xFF0C;&#x800C;&#x662F;&#x900F;&#x904E; <code>flatMap</code> &#x6216; <code>map</code> &#x4F86;&#x8F49;&#x63DB;context&#x88E1;&#x9762;&#x7684;&#x503C;&#xFF0E;</p>
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x50B3;&#x5165; <code>parse</code> &#x904E;&#x5F8C;&#x7684;&#x7D50;&#x679C;&#xFF0C;&#x5C07;&#x6240;&#x6709;&#x7684;function&#x4E32;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Api</span> <span class="keyword">extends</span> <span class="title">App</span> </span>{</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">Option</span>[<span class="type">UserName</span>] = parse(<span class="type">UserName</span>(args(<span class="number">0</span>)))</span><br><span class="line">  <span class="keyword">val</span> password: <span class="type">Option</span>[<span class="type">MD5Password</span>] = parse(<span class="type">MD5Password</span>(args(<span class="number">1</span>)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> json: <span class="type">Option</span>[<span class="type">String</span>] = getJsonProfile(name, password, <span class="type">CHINA</span>)</span><br><span class="line">  <span class="keyword">if</span> (json.isDefined) {</span><br><span class="line">    returnHttpResponse(json.get)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    returnHttpResponse(<span class="string">&quot;&quot;</span>)</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">getJsonProfile</span></span>(name: <span class="type">Option</span>[<span class="type">UserName</span>], password: <span class="type">Option</span>[<span class="type">Password</span>], country: <span class="type">Country</span>): <span class="type">Option</span>[<span class="type">String</span>] = {</span><br><span class="line">    name.flatMap(name1 =&gt;</span><br><span class="line">      password.flatMap(password1 =&gt;</span><br><span class="line">        <span class="type">Repo</span>.login(name1, password1).flatMap(</span><br><span class="line">          account =&gt; {</span><br><span class="line">            <span class="keyword">if</span> (account.userType == <span class="type">ADMIN</span>) {</span><br><span class="line">              <span class="type">Repo</span>.getAccountsByCountry(country).flatMap(profiles =&gt; listToJson(profiles))</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">else</span> <span class="type">None</span></span><br><span class="line">          })</span><br><span class="line">      ))</span><br><span class="line">  }</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// other functions</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x53EF;&#x4EE5;&#x767C;&#x73FE;&#x4E32;&#x63A5;&#x7684;function&#x8D8A;&#x591A;&#xFF0C;&#x6703;&#x8D8A;&#x5BEB;&#x8D8A;&#x53F3;&#x908A;&#xFF0C;&#x6709;&#x9EDE;&#x985E;&#x4F3C; <code>Callback hell</code> &#xFF0C;&#x6216;&#x8A31;&#x4E5F;&#x53EF;&#x4EE5;&#x7A31;&#x70BA; <code>flatMap hell</code>&#x2026;<br>&#x597D;&#x96AA;Scala&#x6709;&#x63D0;&#x4F9B;&#x5F88;&#x597D;&#x7684; syntax sugar <code>for comprehension</code> &#x4F86;&#x89E3;&#x6C7A; <code>flatMap hell</code></p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Api</span> <span class="keyword">extends</span> <span class="title">App</span> </span>{</span><br><span class="line">  <span class="keyword">val</span> name: <span class="type">Option</span>[<span class="type">UserName</span>] = parse(<span class="type">UserName</span>(args(<span class="number">0</span>)))</span><br><span class="line">  <span class="keyword">val</span> password: <span class="type">Option</span>[<span class="type">MD5Password</span>] = parse(<span class="type">MD5Password</span>(args(<span class="number">1</span>)))</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> {</span><br><span class="line">    name1 &lt;- name</span><br><span class="line">    password1 &lt;- password</span><br><span class="line">    account &lt;- <span class="type">Repo</span>.login(name1, password1).filter(a =&gt; a.userType == <span class="type">ADMIN</span>)</span><br><span class="line">    profiles &lt;- <span class="type">Repo</span>.getAccountsByCountry(<span class="type">CHINA</span>)</span><br><span class="line">    json &lt;- listToJson(profiles)</span><br><span class="line">  } <span class="keyword">yield</span> {</span><br><span class="line">    returnHttpResponse(json)</span><br><span class="line">  }</span><br><span class="line">      </span><br><span class="line">  <span class="comment">// other functions</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x6BD4;&#x8F03;&#x7B2C;&#x4E00;&#x500B;&#x7248;&#x672C;&#x548C;&#x6700;&#x5F8C;&#x4E00;&#x500B;&#x7248;&#x672C;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x6700;&#x5F8C;&#x4E00;&#x500B;&#x7248;&#x672C;&#x53EF;&#x4EE5;&#x5F88;&#x6E05;&#x695A;&#x8868;&#x9054;&#x6574;&#x500B;&#x7A0B;&#x5F0F;&#x610F;&#x5716;&#xFF0C;&#x800C;&#x4E0D;&#x6703;&#x88AB;&#x4E00;&#x5806; <code>if else</code> &#x6AA2;&#x67E5;&#x800C;&#x5E72;&#x64FE;&#xFF0E;<br>&#x900F;&#x904E;&#x6B63;&#x78BA;&#x4F7F;&#x7528; <code>Option</code> &#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5B78;&#x7FD2;&#x5230;&#xFF1A;</p>
<ol>
<li>&#x5206;&#x96E2;&#x8CC7;&#x6599;&#x548C;&#x884C;&#x70BA;</li>
<li>&#x5C07;&#x8CC7;&#x6599;&#x653E;&#x5165;context</li>
<li>&#x5229;&#x7528; <code>flatMap</code>, <code>map</code> &#x8F49;&#x63DB;context&#x88E1;&#x9762;&#x7684;&#x503C;</li>
</ol>
<h3 id="&#x884D;&#x751F;&#x9700;&#x6C42;"><a href="#&#x884D;&#x751F;&#x9700;&#x6C42;" class="headerlink" title="&#x884D;&#x751F;&#x9700;&#x6C42;"></a>&#x884D;&#x751F;&#x9700;&#x6C42;</h3><p>&#x6700;&#x5F8C;&#x4E00;&#x500B;&#x7248;&#x672C;&#x53EF;&#x4EE5;&#x767C;&#x73FE;<br>payload&#x4E0D;&#x6B63;&#x78BA;&#x6216;&#x67D0;&#x500B;&#x570B;&#x5BB6;&#x7684;&#x4F7F;&#x7528;&#x8005;&#x70BA;&#x96F6;</p>
<p>&#x7D50;&#x679C;&#x7ADF;&#x7136;&#x90FD;&#x662F;<code>None</code>&#xFF0C;&#x9019;&#x6A23;&#x6703;&#x9020;&#x6210;&#x4F7F;&#x7528;&#x8005;&#x9AD4;&#x9A57;&#x4E0D;&#x4F73;&#x548C;&#x7DAD;&#x8B77;&#x4E0A;&#x7684;&#x56F0;&#x96E3;&#xFF0E;&#x90A3;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x600E;&#x9EBC;&#x6539;&#x5584;&#x5462;&#xFF1F;</p>
<p>&#x53EF;&#x4EE5;&#x6539;&#x7528; <code>Try</code> &#x6216; <code>Either</code> &#x4F86;&#x8868;&#x9054;&#x932F;&#x8AA4;&#xFF0C;&#x5728;&#x9019;&#x908A;&#x4F7F;&#x7528; <code>Option</code> &#x4F86;&#x8868;&#x793A;parse&#x5B8C;&#x7684;&#x7D50;&#x679C;&#x4E0D;&#x592A;&#x6D3D;&#x7576;&#xFF0C;&#x4E3B;&#x8981;&#x662F;&#x5C55;&#x793A;&#x53EF;&#x4EE5;&#x900F;&#x904E;compse&#x65B9;&#x5F0F;&#x4F86;&#x4E32;&#x63A5;&#x591A;&#x500B;function&#xFF0C;&#x4E0B;&#x4E00;&#x7BC7;&#x5C07;&#x6539;&#x7528; <code>Try</code> &#x6216; <code>Either</code> &#xFF0C;&#x8B93;&#x524D;&#x7AEF;&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x77E5;&#x9053;&#x932F;&#x8AA4;&#x8A0A;&#x606F;&#xFF0E;</p>
<h3 id="&#x53C3;&#x8003;&#xFF1A;"><a href="#&#x53C3;&#x8003;&#xFF1A;" class="headerlink" title="&#x53C3;&#x8003;&#xFF1A;"></a>&#x53C3;&#x8003;&#xFF1A;</h3><ol>
<li><a href="http://tpolecat.github.io/presentations/algebraic_types.html#1" target="_blank" rel="noopener">Introduction to Algebraic Types in Scala</a></li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/" itemprop="url">
                  [Java] Java is Pass by Value and Not Pass by Reference
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T19:00:43+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Java&#x5230;&#x5E95;&#x662F;pass by value&#x9084;&#x662F;pass by reference&#xFF1F;&#x8AAA;&#x6CD5;&#x773E;&#x8AAA;&#x7D1B;&#x7D1C;&#xFF0C;&#x5F8C;&#x4F86;&#x770B;&#x5230;&#x9019;&#x7BC7;&#x6587;&#x7AE0;<a href="http://www.journaldev.com/3884/java-is-pass-by-value-and-not-pass-by-reference" target="_blank" rel="noopener">Java is Pass by Value and Not Pass by Reference</a>&#x5F8C;&#xFF0C;&#x89C0;&#x5FF5;&#x624D;&#x6574;&#x500B;&#x91D0;&#x6E05;&#x3002;</p>
<p><strong><em>Java&#x662F;pass by value!</em></strong></p>
<h3 id="&#x7BC4;&#x4F8B;&#xFF1A;"><a href="#&#x7BC4;&#x4F8B;&#xFF1A;" class="headerlink" title="&#x7BC4;&#x4F8B;&#xFF1A;"></a>&#x7BC4;&#x4F8B;&#xFF1A;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Balloon</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String	color;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Balloon</span><span class="params">()</span> </span>{</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Balloon</span><span class="params">(String c)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.color = c;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getColor</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> color;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setColor</span><span class="params">(String color)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.color = color;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">		Balloon red = <span class="keyword">new</span> Balloon(<span class="string">&quot;Red&quot;</span>);</span><br><span class="line">		Balloon blue = <span class="keyword">new</span> Balloon(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line"></span><br><span class="line">		swap(red, blue);</span><br><span class="line">		System.out.println(<span class="string">&quot;red color=&quot;</span> + red.getColor());</span><br><span class="line">		System.out.println(<span class="string">&quot;blue color=&quot;</span> + blue.getColor());</span><br><span class="line"></span><br><span class="line">		foo(blue);</span><br><span class="line">		System.out.println(<span class="string">&quot;blue color=&quot;</span> + blue.getColor());</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(Balloon balloon)</span> </span>{</span><br><span class="line">		balloon.setColor(<span class="string">&quot;Red&quot;</span>);</span><br><span class="line">		balloon = <span class="keyword">new</span> Balloon(<span class="string">&quot;Green&quot;</span>);</span><br><span class="line">		balloon.setColor(<span class="string">&quot;Blue&quot;</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(Object o1, Object o2)</span> </span>{</span><br><span class="line">		Object temp = o1;</span><br><span class="line">		o1 = o2;</span><br><span class="line">		o2 = temp;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap1</span><span class="params">(Balloon o1, Balloon o2)</span> </span>{</span><br><span class="line">		String temp = o1.getColor();</span><br><span class="line">		o1.setColor(o2.getColor());</span><br><span class="line">		o2.setColor(temp);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//&#x4F7F;&#x7528;swap()</span><br><span class="line">red color=Red</span><br><span class="line">blue color=Blue</span><br><span class="line">blue color=Red</span><br><span class="line"></span><br><span class="line">//&#x4F7F;&#x7528;swap1()</span><br><span class="line">red color=Blue</span><br><span class="line">blue color=Red</span><br><span class="line">blue color=Red</span><br></pre></td></tr></table></figure></p>
<p>&#x5206;&#x6790;&#xFF1A;</p>
<ol>
<li>&#x5C1A;&#x672A;&#x57F7;&#x884C;swap()&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-7--1.png" alt=""></li>
<li>&#x57F7;&#x884C;swap()&#xFF0C;o1&#x6307;&#x5411;red&#xFF0C;o2&#x6307;&#x5411;blue&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-1---1--1.png" alt=""></li>
<li>swap()&#x57F7;&#x884C;&#x7D50;&#x675F;&#xFF0C;&#x539F;&#x672C;&#x7684;&#x7269;&#x4EF6;&#x4E26;&#x6C92;&#x6709;&#x4E92;&#x76F8;&#x4EA4;&#x63DB;&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-2--1.png" alt=""></li>
<li>&#x57F7;&#x884C;foo()&#xFF0C;ballon&#x6307;&#x5411;blue&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-3--1.png" alt=""></li>
<li>&#x57F7;&#x884C;foo()&#x7B2C;&#x4E00;&#x884C;&#xFF0C;&#x900F;&#x904E;&#x539F;&#x672C;&#x7269;&#x4EF6;&#x7684;setter method&#x4FEE;&#x6539;&#x503C;&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-4--1.png" alt=""></li>
<li>&#x57F7;&#x884C;foo()&#x7B2C;&#x4E8C;&#x884C;&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-5--2.png" alt=""></li>
<li>&#x57F7;&#x884C;foo()&#x7B2C;&#x4E09;&#x884C;&#xFF1A;<img src="/2016/12/09/Java-Java-is-Pass-by-Value-and-Not-Pass-by-Reference/Untitled-6--2.png" alt=""></li>
</ol>
<p>&#x56E0;&#x70BA;Java&#x662F;&#x63A1;&#x7528;pass by value&#x4F5C;&#x6CD5;&#xFF0C;&#x7576;&#x4EE5;&#x7269;&#x4EF6;&#x4F5C;&#x70BA;&#x53C3;&#x6578;&#x50B3;&#x5165;&#x5230;method&#xFF0C;&#x5728;method&#x88E1;&#x9762;&#x60F3;&#x8981;&#x4FEE;&#x6539;&#x7269;&#x4EF6;&#x7684;&#x503C;&#xFF0C;&#x9700;&#x900F;&#x904E;&#x7269;&#x4EF6;&#x7684;setter method&#xFF0C;&#x9019;&#x6A23;&#x539F;&#x672C;&#x7269;&#x4EF6;&#x7684;&#x503C;&#x624D;&#x6703;&#x9023;&#x5E36;&#x4E00;&#x8D77;&#x8B8A;&#x66F4;&#x3002;&#x900F;&#x904E;assign(=)&#x6216;new&#x7B49;&#x65B9;&#x5F0F;&#xFF0C;&#x539F;&#x672C;&#x7269;&#x4EF6;&#x7684;&#x503C;&#x90FD;&#x4E0D;&#x6703;&#x6709;&#x8B8A;&#x5316;&#x3002;</p>
<h3 id="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"><a href="#&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;" class="headerlink" title="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"></a>&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;</h3><ul>
<li><a href="http://www.journaldev.com/3884/java-is-pass-by-value-and-not-pass-by-reference" target="_blank" rel="noopener">Java is Pass by Value and Not Pass by Reference</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/Java-Java-String-Pool/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/Java-Java-String-Pool/" itemprop="url">
                  [Java]  Java String Pool
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T18:57:57+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/Java-Java-String-Pool/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/Java-Java-String-Pool/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5047;&#x5982;&#x6C92;&#x6709;string pool&#x9019;&#x6A23;&#x7684;&#x6A5F;&#x5236;&#xFF0C;&#x9047;&#x5230;string&#x5C31;&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x7269;&#x4EF6;&#xFF0C;&#x9019;&#x6A23;&#x8A18;&#x61B6;&#x9AD4;&#x5C31;&#x5F88;&#x5FEB;&#x5C31;&#x6703;&#x7206;&#x6389;&#x4E86;&#x3002;</p>
<p>&#x5728;java&#x4E2D;&#x63A1;&#x53D6;<a href="http://en.wikipedia.org/wiki/Flyweight_pattern" target="_blank" rel="noopener">Flyweight pattern</a>&#x4F5C;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5171;&#x4EAB;&#x540C;&#x6A23;&#x7684;string object&#x3002;</p>
<p><img src="http://www.journaldev.com/wp-content/uploads/2012/11/String-Pool-Java1.png" alt=""></p>
<p>&#x5EFA;&#x7ACB;string object&#x6709;&#x5169;&#x7A2E;&#x65B9;&#x5F0F;&#xFF1A;</p>
<ol>
<li>String string = &#x201C;Cat&#x201D;;</li>
<li>String string = new String(&#x201C;Cat&#x201D;);</li>
</ol>
<p>&#x63A1;&#x7528;&#x7B2C;&#x4E00;&#x7A2E;&#x65B9;&#x6CD5;&#xFF0C;&#x6703;&#x5148;&#x6AA2;&#x67E5;string pool&#x662F;&#x5426;&#x6709;&#x76F8;&#x540C;&#x7684;string&#x3002;&#x82E5;&#x6709;&#x5C31;&#x5171;&#x7528;&#xFF0C;&#x6C92;&#x6709;&#x5247;&#x5EFA;&#x7ACB;&#x4E4B;&#x3002;</p>
<p>&#x63A1;&#x7528;&#x7B2C;&#x4E8C;&#x7A2E;&#x65B9;&#x6CD5;&#xFE50;&#x4E0D;&#x6703;&#x4F7F;&#x7528;&#x5230;string pool&#x6A5F;&#x5236;&#xFF0C;&#x800C;&#x662F;&#x5728;heap&#x5EFA;&#x7ACB;&#x4E00;&#x500B;&#x65B0;&#x7684;string object&#x3002;&#x82E5;&#x4E4B;&#x5F8C;&#x60F3;&#x8981;&#x4F7F;&#x7528;string pool&#x6A5F;&#x5236;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29" target="_blank" rel="noopener">intern</a>&#x3002;</p>
<h3 id="&#x7BC4;&#x4F8B;&#xFF1A;"><a href="#&#x7BC4;&#x4F8B;&#xFF1A;" class="headerlink" title="&#x7BC4;&#x4F8B;&#xFF1A;"></a>&#x7BC4;&#x4F8B;&#xFF1A;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringExample</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>{</span><br><span class="line">		String s1 = <span class="string">&quot;Cat&quot;</span>;</span><br><span class="line">		String s2 = <span class="string">&quot;Cat&quot;</span>;</span><br><span class="line">		String s3 = <span class="keyword">new</span> String(<span class="string">&quot;Cat&quot;</span>);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;s1 == s2 ?&quot;</span> + (s1 == s2));</span><br><span class="line">		System.out.println(<span class="string">&quot;s1 == s3 ?&quot;</span> + (s1 == s3));</span><br><span class="line">		System.out.println(<span class="string">&quot;s1 == s3.intern() ?&quot;</span> + (s1 == s3.intern()));</span><br><span class="line">		System.out.println(<span class="string">&quot;s1 equals s3 ?&quot;</span> + s1.equals(s3));</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s1 == s2 ?true</span><br><span class="line">s1 == s3 ?false</span><br><span class="line">s1 == s3.intern() ?true</span><br><span class="line">s1 equals s3 ?true</span><br></pre></td></tr></table></figure></p>
<h3 id="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"><a href="#&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;" class="headerlink" title="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"></a>&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;</h3><ul>
<li><a href="http://www.journaldev.com/797/what-is-java-string-pool" target="_blank" rel="noopener">What is Java String Pool?</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/SQL-How-to-get-rank-using-ANSI-SQL/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/SQL-How-to-get-rank-using-ANSI-SQL/" itemprop="url">
                  [SQL] How to get rank using ANSI SQL
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T18:57:02+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/SQL-How-to-get-rank-using-ANSI-SQL/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/SQL-How-to-get-rank-using-ANSI-SQL/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x8981;&#x5C0D;&#x5206;&#x6578;&#x505A;&#x6392;&#x540D;&#xFF0C;&#x6700;&#x76F4;&#x63A5;&#x7684;&#x60F3;&#x6CD5;&#x5C31;&#x5C0D;&#x5B83;&#x5011;&#x505A;ORDER BY&#x3002;&#x4F46;&#x662F;&#x7576;&#x5206;&#x6578;&#x6709;&#x91CD;&#x8907;&#x6642;&#x5019;&#x6392;&#x540D;&#x662F;&#x8981;&#x4E00;&#x6A23;&#xFF0C;&#x9019;&#x6642;&#x5019;ORDER BY&#x5C31;&#x767C;&#x63EE;&#x4E0D;&#x4E86;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x4E0D;&#x540C;&#x7684;&#x5EE0;&#x5546;&#x7684;&#x8CC7;&#x6599;&#x5EAB;&#x6709;&#x63D0;&#x4F9B;&#x4E0D;&#x540C;&#x7684;&#x51FD;&#x6578;&#x53EF;&#x4EE5;&#x89E3;&#x6C7A;&#x9019;&#x500B;&#x554F;&#x984C;&#xFF0C;&#x5047;&#x5982;&#x6C92;&#x6709;&#x4F7F;&#x7528;&#x51FD;&#x6578;&#x8A72;&#x5982;&#x4F55;&#x505A;&#x5230;&#x5462;?</p>
<h4 id="&#x5EFA;&#x7ACB;&#x8CC7;&#x6599;&#x8868;&#xFF1A;"><a href="#&#x5EFA;&#x7ACB;&#x8CC7;&#x6599;&#x8868;&#xFF1A;" class="headerlink" title="&#x5EFA;&#x7ACB;&#x8CC7;&#x6599;&#x8868;&#xFF1A;"></a>&#x5EFA;&#x7ACB;&#x8CC7;&#x6599;&#x8868;&#xFF1A;</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`golf`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">45</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`score`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h4 id="&#x65B0;&#x589E;&#x8CC7;&#x6599;&#xFF1A;"><a href="#&#x65B0;&#x589E;&#x8CC7;&#x6599;&#xFF1A;" class="headerlink" title="&#x65B0;&#x589E;&#x8CC7;&#x6599;&#xFF1A;"></a>&#x65B0;&#x589E;&#x8CC7;&#x6599;&#xFF1A;</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (A,<span class="number">74</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (B,<span class="number">79</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (C,<span class="number">79</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (D,<span class="number">82</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (E,<span class="number">89</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (F,<span class="number">89</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`golf`</span>(<span class="string">`name`</span>,<span class="string">`score`</span>) <span class="keyword">VALUES</span> (G,<span class="number">98</span>);</span><br></pre></td></tr></table></figure>
<h4 id="&#x67E5;&#x8A62;&#xFF1A;"><a href="#&#x67E5;&#x8A62;&#xFF1A;" class="headerlink" title="&#x67E5;&#x8A62;&#xFF1A;"></a>&#x67E5;&#x8A62;&#xFF1A;</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    tmp.name,</span><br><span class="line">    tmp.score,</span><br><span class="line">    (<span class="keyword">SELECT</span> </span><br><span class="line">            <span class="keyword">COUNT</span>(*) + <span class="number">1</span></span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            (<span class="keyword">SELECT</span> </span><br><span class="line">                golf.score</span><br><span class="line">            <span class="keyword">FROM</span></span><br><span class="line">                golf</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> golf.score) <span class="keyword">AS</span> tmp1</span><br><span class="line">        <span class="keyword">WHERE</span></span><br><span class="line">            tmp1.score &gt; tmp.score) <span class="keyword">AS</span> <span class="keyword">rank</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    golf <span class="keyword">AS</span> tmp</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> tmp.score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h4 id="&#x7D50;&#x679C;&#xFF1A;"><a href="#&#x7D50;&#x679C;&#xFF1A;" class="headerlink" title="&#x7D50;&#x679C;&#xFF1A;"></a>&#x7D50;&#x679C;&#xFF1A;</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">name	score	rank</span><br><span class="line">G		98		1</span><br><span class="line">E		89		2</span><br><span class="line">F		89		2</span><br><span class="line">D		82		3</span><br><span class="line">B		79		4</span><br><span class="line">C		79		4</span><br><span class="line">A		74		5</span><br></pre></td></tr></table></figure>
<h4 id="&#x60F3;&#x6CD5;&#xFF1A;"><a href="#&#x60F3;&#x6CD5;&#xFF1A;" class="headerlink" title="&#x60F3;&#x6CD5;&#xFF1A;"></a>&#x60F3;&#x6CD5;&#xFF1A;</h4><p>&#x5148;&#x5F9E;&#x6392;&#x540D;&#x9019;&#x500B;&#x6982;&#x5FF5;&#x4E0B;&#x624B;&#xFF0C;&#x5047;&#x5982;&#x6709;&#x4E09;&#x500B;&#x4EBA;&#x7684;&#x5206;&#x6578;(&#x9019;&#x4E09;&#x4EBA;&#x5206;&#x6578;&#x90FD;&#x4E0D;&#x4E00;&#x6A23;)&#x5927;&#x65BC;&#x6211;&#x7684;&#x5206;&#x6578;&#xFF0C;&#x90A3;&#x9EBC;&#x6211;&#x5C31;&#x662F;&#x6392;&#x540D;&#x7B2C;&#x56DB;&#x3002;&#x56E0;&#x70BA;&#x5206;&#x6578;&#x91CD;&#x8907;&#x7684;&#x6392;&#x540D;&#x662F;&#x4E00;&#x6A23;&#x7684;&#xFF0C;&#x9700;&#x8981;&#x5148;&#x5C0D;&#x5206;&#x6578;&#x505A;&#x4E00;&#x6B21;GROUP BY&#xFF0C;&#x518D;&#x6839;&#x64DA;&#x4E0A;&#x8FF0;&#x7684;&#x6982;&#x5FF5;&#x53BB;&#x7B97;&#x51FA;&#x6392;&#x540D;&#x3002;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/Java-Synchronize-in-Java/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/Java-Synchronize-in-Java/" itemprop="url">
                  [Java] Synchronize in Java
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T17:31:00+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/Java-Synchronize-in-Java/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/Java-Synchronize-in-Java/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;&#x4E86;&#x89E3;Java&#x7684;synchronized&#x6A5F;&#x5236;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x4F86;&#x8907;&#x7FD2;&#x4E00;&#x4E0B;Monitor&#x3002;</p>
<p>&#x53EF;&#x4EE5;&#x628A;Monitor&#x60F3;&#x50CF;&#x6210;&#x5B83;&#x5C31;&#x662F;&#x4E00;&#x500B;&#x985E;&#x5225;&#xFF0C;&#x88E1;&#x9762;&#x5B58;&#x653E;&#x8457;&#x5171;&#x4EAB;&#x8B8A;&#x6578;&#x3001;&#x65B9;&#x6CD5;&#x548C;&#x5EFA;&#x69CB;&#x5B50;&#x3002;<br><img src="/2016/12/09/Java-Synchronize-in-Java/Monitor.png" alt="Monitor"><br>Monitor&#x6703;&#x78BA;&#x4FDD;&#x53EA;&#x6709;&#x4E00;&#x500B;Process&#x53EF;&#x4EE5;&#x9032;&#x5165;&#xFF0C;&#x5176;&#x4ED6;&#x4E5F;&#x60F3;&#x8981;&#x9032;&#x5165;&#x7684;Process&#xFF0C;&#x5C31;&#x5FC5;&#x9808;&#x5728;queue&#x88E1;&#x9762;&#x7B49;&#x5F85;&#x3002;&#x7A0B;&#x5F0F;&#x8A2D;&#x8A08;&#x5E2B;&#x53EF;&#x4EE5;&#x6839;&#x64DA;&#x4E0D;&#x540C;&#x7684;&#x60C5;&#x6CC1;&#xFF0C;&#x6C7A;&#x5B9A;&#x662F;&#x5426;&#x8981;&#x8B93;&#x6B63;&#x5728;Monitor&#x7684;Process&#x9032;&#x5165;waiting state&#x6216;&#x662F;&#x559A;&#x9192;&#x5176;&#x4ED6;&#x5728;waiting state&#x7684;Process&#x3002;</p>
<p>&#x4F8B;&#x5982;&#xFF1A;&#x7576;&#x67D0;&#x500B;Process&#x53D6;&#x5F97;Monitor&#x7684;&#x57F7;&#x884C;&#x6B0A;&#x5229;&#xFF0C;&#x5728;&#x57F7;&#x884C;&#x904E;&#x7A0B;&#x4E2D;&#x767C;&#x73FE;&#x4E0D;&#x7B26;&#x5408;x&#x60C5;&#x6CC1;&#xFF0C;&#x5FC5;&#x9808;&#x9032;&#x5165;waiting state&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;x.wait()&#x3002;&#x60F3;&#x8981;&#x559A;&#x9192;x queue&#x4E2D;&#x7684;waiting Process&#xFF0C;&#x53EF;&#x4EE5;&#x900F;&#x904E;x.signal()&#x3002;&#x8A73;&#x7D30;&#x53EF;&#x4EE5;&#x53C3;&#x8003;<a href="http://www.amazon.com/Operating-System-Concepts-Abraham-Silberschatz/dp/1118063333/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1409112396&amp;sr=1-1&amp;keywords=Operating+System+Concepts" target="_blank" rel="noopener">Operating System Concepts</a>&#x3002;</p>
<p>Java&#x7684;synchronized&#x5C31;&#x662F;&#x5BE6;&#x4F5C;&#x4E86;Monitor&#xFF0C;Object&#x7684;wait()&#x548C;notify()&#x5C31;&#x76F8;&#x7576;&#x65BC;wait()&#x548C;signal()&#x3002;&#x6709;&#x4E86;&#x9019;&#x6A23;&#x7684;&#x6982;&#x5FF5;&#x5F8C;&#xFF0C;&#x5728;&#x4F7F;&#x7528;synchronized&#x5C31;&#x6BD4;&#x8F03;&#x4E0D;&#x6703;&#x767C;&#x751F;&#x9396;&#x932F;&#x5C0D;&#x8C61;&#x7684;&#x554F;&#x984C;&#x3002;</p>
<p>synchronized&#x4F7F;&#x7528;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x5206;&#x70BA;&#x5169;&#x7A2E;&#xFF1A;</p>
<ol>
<li>synchronized mehtod </li>
<li>synchronized block</li>
</ol>
<p>###&#x7BC4;&#x4F8B;&#xFF1A;<br>TargetObject.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TargetObject</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>	count	= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in method1 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in method2 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticMethod1</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in static method1 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticMethod2</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in static method2 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>Thread1.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread1</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> TargetObject	targetObject;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Thread1</span><span class="params">(TargetObject targetObject)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.targetObject = targetObject;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">			<span class="keyword">this</span>.targetObject.method1();</span><br><span class="line">			<span class="keyword">try</span> {</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>Thread2.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> TargetObject	targetObject;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Thread1</span><span class="params">(TargetObject targetObject)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.targetObject = targetObject;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">			<span class="keyword">this</span>.targetObject.method2();</span><br><span class="line">			<span class="keyword">try</span> {</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			}</span><br><span class="line">			<span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>Run.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Run</span> </span>{</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">		TargetObject	targetObject	= <span class="keyword">new</span> TargetObject();</span><br><span class="line">		Thread thread1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread1(targetObject), <span class="string">&quot;Thread1&quot;</span>);</span><br><span class="line">		Thread thread2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread2(targetObject), <span class="string">&quot;Thread2&quot;</span>);</span><br><span class="line">		thread1.start();</span><br><span class="line">		thread2.start();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x57F7;&#x884C;&#x7D50;&#x679C;&#xFF1A;&#x6C92;&#x6709;&#x505A;&#x540C;&#x6B65;&#x8655;&#x7406;&#xFF0C;&#x6703;&#x5B58;&#x5728;race condition&#x3002;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Thread1 in method1 and count = <span class="number">2</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">2</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">3</span></span><br><span class="line">Thread1 in method1 and count = <span class="number">4</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">5</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">6</span></span><br></pre></td></tr></table></figure></p>
<hr>
<ul>
<li>&#x4F7F;&#x7528;synchronized method</li>
</ul>
<p>&#x5728;TargetObject.java&#x4E2D;&#x7684;method1&#x548C;method2&#x52A0;&#x4E0A;synchronized&#x5C31;&#x53EF;&#x4EE5;&#x9396;&#x5B9A;&#x7531;TargetObject&#x985E;&#x5225;&#x6240;&#x5BE6;&#x9AD4;&#x5316;&#x7684;&#x7269;&#x4EF6;targetObject&#x3002;</p>
<p>TargetObject.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TargetObject</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>	count	= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method1</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in method1 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method2</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in method2 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticMethod1</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in static method1 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">staticMethod2</span><span class="params">()</span> </span>{</span><br><span class="line">		count++;</span><br><span class="line">		System.out.println(Thread.currentThread().getName() + <span class="string">&quot; in static method2 and count = &quot;</span> + count);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x57F7;&#x884C;&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Thread1 in method1 and count = <span class="number">1</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">2</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">3</span></span><br><span class="line">Thread1 in method1 and count = <span class="number">4</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">5</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">6</span></span><br><span class="line">Thread1 in method1 and count = <span class="number">7</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">8</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">9</span></span><br></pre></td></tr></table></figure></p>
<hr>
<p>&#x70BA;&#x4E86;&#x66F4;&#x6E05;&#x695A;&#x4E86;&#x89E3;&#x9396;&#x5B9A;&#x7684;&#x5C0D;&#x8C61;&#xFF0C;&#x73FE;&#x5728;&#x5148;&#x79FB;&#x9664;method1&#x7684;synchronized&#xFF0C;&#x5C07;&#x540C;&#x6B65;&#x6A5F;&#x5236;&#x5BEB;&#x5230;Thread1.java&#x3002;</p>
<p>Thread1.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread1</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> TargetObject	targetObject;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Thread1</span><span class="params">(TargetObject targetObject)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.targetObject = targetObject;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">			<span class="keyword">synchronized</span> (targetObject) {</span><br><span class="line">				<span class="keyword">this</span>.targetObject.method1();</span><br><span class="line">				<span class="keyword">try</span> {</span><br><span class="line">					Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x57F7;&#x884C;&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Thread1 in method1 and count = <span class="number">1</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">2</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">3</span></span><br><span class="line">Thread1 in method1 and count = <span class="number">4</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">5</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">6</span></span><br><span class="line">Thread1 in method1 and count = <span class="number">7</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">8</span></span><br><span class="line">Thread2 in method2 and count = <span class="number">9</span></span><br></pre></td></tr></table></figure></p>
<p>&#x5F9E;&#x57F7;&#x884C;&#x7D50;&#x679C;&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x4E0A;&#x9396;&#x7684;&#x5C0D;&#x8C61;&#x662F;&#x5728;Run.java&#x4E2D;&#x5BE6;&#x9AD4;&#x5316;&#x7684;targetObject&#x3002;</p>
<hr>
<p>&#x82E5;&#x5C07;</p>
<ul>
<li>Thread1.java&#x4E2D;&#x7684;this.targetObject.method1()&#x6539;&#x6210;TargetObject.staticMethod1()&#x3002;</li>
<li>Thread2.java&#x4E2D;&#x7684;this.targetObject.method2()&#x6539;&#x6210;TargetObject.staticMethod2()&#x3002;</li>
</ul>
<p>&#x5FC5;&#x9808;&#x5C0D;TargetObject&#x7684;staticMethod1&#x548C;staticMethod2&#x505A;synchronized&#x3002;<br>&#x900F;&#x904E;&#x4E0A;&#x8FF0;&#x7684;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x77E5;&#x9053;synchronized static method&#x662F;&#x9396;&#x5B9A;TargetObject.class&#x3002;</p>
<hr>
<ul>
<li>&#x4F7F;&#x7528;synchronized block</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(&#x60F3;&#x8981;&#x9396;&#x5B9A;&#x7684;&#x7269;&#x4EF6;&#x6216;&#x662F;<span class="class"><span class="keyword">class</span> <span class="title">literal</span>)</span>{</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<p>synchronized block&#x8F03;&#x6709;&#x5F48;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x9078;&#x64C7;&#x9396;&#x5B9A;&#x7684;&#x5C0D;&#x8C61;&#x3002;<br>Thread1.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread1</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> TargetObject	targetObject;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">byte</span>[]			lock;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Thread1</span><span class="params">(TargetObject targetObject, <span class="keyword">byte</span>[] lock)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.targetObject = targetObject;</span><br><span class="line">		<span class="keyword">this</span>.lock = lock;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">			<span class="keyword">synchronized</span> (<span class="keyword">this</span>.lock) {</span><br><span class="line">				<span class="keyword">this</span>.targetObject.method1();</span><br><span class="line">				<span class="keyword">try</span> {</span><br><span class="line">					Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>Thread2.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> TargetObject	targetObject;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">byte</span>[]			lock;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Thread2</span><span class="params">(TargetObject targetObject, <span class="keyword">byte</span>[] lock)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.targetObject = targetObject;</span><br><span class="line">		<span class="keyword">this</span>.lock = lock;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) {</span><br><span class="line">			<span class="keyword">synchronized</span> (<span class="keyword">this</span>.lock) {</span><br><span class="line">				<span class="keyword">this</span>.targetObject.method2();</span><br><span class="line">				<span class="keyword">try</span> {</span><br><span class="line">					Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">				}</span><br><span class="line">				<span class="keyword">catch</span> (InterruptedException e) {</span><br><span class="line">					e.printStackTrace();</span><br><span class="line">				}</span><br><span class="line">			}</span><br><span class="line">		}</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>Run.java&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Run</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">		TargetObject targetObject = <span class="keyword">new</span> TargetObject();</span><br><span class="line">		<span class="keyword">final</span> <span class="keyword">byte</span>[] lock = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">0</span>];</span><br><span class="line">		Thread thread1 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread1(targetObject, lock), <span class="string">&quot;Thread1&quot;</span>);</span><br><span class="line">		Thread thread2 = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread2(targetObject, lock), <span class="string">&quot;Thread2&quot;</span>);</span><br><span class="line">		thread1.start();</span><br><span class="line">		thread2.start();</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<p>&#x5728;&#x4F7F;&#x7528;synchronized&#x7684;&#x6642;&#x5019;&#xFF0C;&#x52D9;&#x5FC5;&#x8981;&#x641E;&#x6E05;&#x695A;&#x9396;&#x5B9A;&#x7684;&#x5C0D;&#x8C61;&#xFF0C;&#x6C92;&#x6709;&#x641E;&#x6E05;&#x695A;&#x53CD;&#x800C;&#x7B49;&#x540C;&#x65BC;&#x6C92;&#x6709;&#x540C;&#x6B65;&#x3002;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/SQL-5-types-of-SQL-JOIN/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/SQL-5-types-of-SQL-JOIN/" itemprop="url">
                  [SQL] 5 types of SQL JOIN
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T17:30:08+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/SQL/" itemprop="url" rel="index">
                    <span itemprop="name">SQL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/SQL-5-types-of-SQL-JOIN/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/SQL-5-types-of-SQL-JOIN/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ANSI-standard SQL&#x6709;&#x4E94;&#x7A2E;JOIN&#xFF1A;</p>
<ol>
<li>INNER JOIN</li>
<li>LEFT OUTER JOIN</li>
<li>RIGHT OUTER JOIN</li>
<li>FULL OUTER JOIN</li>
<li>CROSS JOIN</li>
</ol>
<p><a href="http://blog.codinghorror.com/a-visual-explanation-of-sql-joins/" target="_blank" rel="noopener">A Visual Explanation of SQL Joins</a>&#x7528;<a href="http://en.wikipedia.org/wiki/Venn_diagram" target="_blank" rel="noopener">Venn diagrams</a>&#x65B9;&#x5F0F;&#x5716;&#x89E3;JOIN&#x3002;</p>
<h3 id="&#x7BC4;&#x4F8B;&#xFF1A;"><a href="#&#x7BC4;&#x4F8B;&#xFF1A;" class="headerlink" title="&#x7BC4;&#x4F8B;&#xFF1A;"></a>&#x7BC4;&#x4F8B;&#xFF1A;</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TableA        TableB</span><br><span class="line">id name       id  name</span><br><span class="line">-- ----       --  ----</span><br><span class="line">1  Pirate     1   Rutabaga</span><br><span class="line">2  Monkey     2   Pirate</span><br><span class="line">3  Ninja      3   Darth Vader</span><br><span class="line">4  Spaghetti  4   Ninja</span><br></pre></td></tr></table></figure>
<ul>
<li>INNER JOIN&#xFF1A;</li>
</ul>
<p>SQL&#xFF1A;<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TableA</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> TableB</span><br><span class="line"><span class="keyword">ON</span> TableA.name = TableB.name</span><br></pre></td></tr></table></figure></p>
<p>&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">TableA         TableB</span><br><span class="line">id  name       id   name</span><br><span class="line">--  ----       --   ----</span><br><span class="line">1   Pirate     2    Pirate</span><br><span class="line">3   Ninja      4    Ninja</span><br></pre></td></tr></table></figure></p>
<p>Venn diagram&#xFF1A;<br><img src="http://blog.codinghorror.com/content/images/uploads/2007/10/6a0120a85dcdae970b012877702708970c-pi.png" alt=""></p>
<p><em>&#x5217;&#x51FA;&#x5169;&#x500B;Table&#x5171;&#x6709;&#x7684;&#x8CC7;&#x6599;&#xFF0C;&#x5373;&#x5169;&#x500B;Table&#x7684;&#x4EA4;&#x96C6;&#x3002;</em></p>
<hr>
<ul>
<li>LEFT OUTER JOIN&#xFF1A;</li>
</ul>
<p>SQL&#xFF1A;<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TableA</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> TableB</span><br><span class="line"><span class="keyword">ON</span> TableA.name = TableB.name</span><br></pre></td></tr></table></figure></p>
<p>&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TableA         TableB</span><br><span class="line">id  name       id    name</span><br><span class="line">--  ----       --    ----</span><br><span class="line">1   Pirate     2     Pirate</span><br><span class="line">2   Monkey     null  null</span><br><span class="line">3   Ninja      4     Ninja</span><br><span class="line">4   Spaghetti  null  null</span><br></pre></td></tr></table></figure></p>
<p>Venn diagram&#xFF1A;<br><img src="http://blog.codinghorror.com/content/images/uploads/2007/10/6a0120a85dcdae970b01287770273e970c-pi.png" alt=""><br><em>&#x4EE5;&#x5DE6;&#x908A;Table&#x70BA;&#x4E3B;&#xFF0C;&#x82E5;&#x6C92;&#x6709;&#x914D;&#x5C0D;&#x5230;&#x8CC7;&#x6599;&#xFF0C;&#x986F;&#x793A;null&#x3002;</em></p>
<hr>
<ul>
<li>RIGHT OUTER JOIN&#xFF1A;</li>
</ul>
<p>&#x8DDF;LEFT OUTER JOIN&#x5927;&#x540C;&#x5C0F;&#x7570;&#xFF0C;&#x7D50;&#x679C;&#x6539;&#x6210;&#x4EE5;Table B&#x70BA;&#x4E3B;&#xFF0C;&#x4E0D;&#x518D;&#x8D05;&#x8FF0;&#x3002;</p>
<hr>
<ul>
<li>FULL OUTER JOIN&#xFF1A;</li>
</ul>
<p>SQL&#xFF1A;<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TableA</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> TableB</span><br><span class="line"><span class="keyword">ON</span> TableA.name = TableB.name</span><br></pre></td></tr></table></figure></p>
<p>&#x7D50;&#x679C;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">TableA           TableB</span><br><span class="line">id    name       id    name</span><br><span class="line">--    ----       --    ----</span><br><span class="line">1     Pirate     2     Pirate</span><br><span class="line">2     Monkey     null  null</span><br><span class="line">3     Ninja      4     Ninja</span><br><span class="line">4     Spaghetti  null  null</span><br><span class="line">null  null       1     Rutabaga</span><br><span class="line">null  null       3     Darth Vader</span><br></pre></td></tr></table></figure></p>
<p>Venn diagram&#xFF1A;<br><img src="http://blog.codinghorror.com/content/images/uploads/2007/10/6a0120a85dcdae970b012877702725970c-pi.png" alt=""><br><em>&#x70BA;&#x5169;&#x500B;Table&#x7684;&#x806F;&#x96C6;&#xFF0C;&#x82E5;&#x6C92;&#x6709;&#x914D;&#x5C0D;&#x5230;&#x8CC7;&#x6599;&#x4EE5;null&#x986F;&#x793A;&#x3002;</em></p>
<hr>
<ul>
<li>CROSS JOIN&#xFF1A;<br>&#x5373;&#x662F;<a href="http://en.wikipedia.org/wiki/Cartesian_product" target="_blank" rel="noopener">Cartesian product</a>&#xFF0C;&#x6703;&#x7522;&#x751F;&#x5169;&#x500B;Table&#x6240;&#x6709;&#x7684;&#x7D44;&#x5408;&#x3002;<br>SQL&#xFF1A;<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> TableA</span><br><span class="line"><span class="keyword">CROSS</span> <span class="keyword">JOIN</span> TableB</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>&#x7D50;&#x679C;&#xFF1A;<br>4*4 = 16&#x7A2E;&#x7D44;&#x5408;</p>
<p><em>&#x56E0;&#x70BA;CROSS JOIN&#x6703;&#x5C07;&#x6240;&#x6709;&#x7D44;&#x5408;&#x5217;&#x51FA;&#x4F86;&#xFF0C;&#x6240;&#x4EE5;&#x7576;&#x8CC7;&#x6599;&#x91CF;&#x9F90;&#x5927;&#x6642;&#x5019;&#xFF0C;&#x6548;&#x80FD;&#x6703;&#x8B8A;&#x5F97;&#x5F88;&#x5DEE;&#x3002;</em></p>
<h3 id="&#x7E3D;&#x7D50;&#xFF1A;"><a href="#&#x7E3D;&#x7D50;&#xFF1A;" class="headerlink" title="&#x7E3D;&#x7D50;&#xFF1A;"></a>&#x7E3D;&#x7D50;&#xFF1A;</h3><p>&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x4EE5;&#x4E0A;&#x7684;&#x4E94;&#x7A2E;JOIN&#x548C;&#x904E;&#x6FFE;&#x65B9;&#x5F0F;&#xFF0C;&#x5C0D;&#x5169;&#x500B;&#x96C6;&#x5408;&#x9032;&#x884C;&#x4EA4;&#x96C6;&#x3001;&#x806F;&#x96C6;&#x3001;&#x5DEE;&#x96C6;&#x7B49;&#x64CD;&#x4F5C;&#x3002;<br><img src="http://edwarcardona.files.wordpress.com/2013/03/sql_server_joins.jpg" alt="SQL JOINS"></p>
<h3 id="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"><a href="#&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;" class="headerlink" title="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"></a>&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;</h3><ul>
<li><a href="http://blog.codinghorror.com/a-visual-explanation-of-sql-joins/" target="_blank" rel="noopener">A Visual Explanation of SQL Joins</a></li>
<li><a href="https://en.wikipedia.org/wiki/Join_(SQL" target="_blank" rel="noopener">Join (SQL)</a>)</li>
<li><a href="http://coolshell.cn/articles/3463.html" target="_blank" rel="noopener">&#x5716;&#x89E3;SQL&#x7684;Join</a>&#x3000;</li>
<li><a href="http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins" target="_blank" rel="noopener">Visual Representation of SQL Joins</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/The-Law-of-Demeter/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/The-Law-of-Demeter/" itemprop="url">
                  The Law of Demeter
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T17:27:16+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/The-Law-of-Demeter/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/The-Law-of-Demeter/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x66F4;&#x8A73;&#x7D30;&#x7684;&#x8AAA;&#x6CD5;&#x662F;&#x201C;Law of Demeter for Functions/Methods&#x201D; (LoD-F)&#xFF0C;&#x7C21;&#x55AE;&#x5316;Object&#x4E4B;&#x9593;&#x7684;&#x4E92;&#x52D5;&#xFF0C;&#x8B93;&#x591A;&#x500B;Object&#x4E0D;&#x8981;&#x4E92;&#x76F8;&#x76F8;&#x4F9D;&#x3002;</p>
<h2 id="&#x5B9A;&#x7FA9;&#xFF1A;"><a href="#&#x5B9A;&#x7FA9;&#xFF1A;" class="headerlink" title="&#x5B9A;&#x7FA9;&#xFF1A;"></a>&#x5B9A;&#x7FA9;&#xFF1A;</h2><p>The Law of Demeter for functions requires that a method M of an object O may only invoke the methods of the following kinds of objects:</p>
<ol>
<li>O itself</li>
<li>M&#x2019;s parameters</li>
<li>Any objects created/instantiated within M</li>
<li>O&#x2019;s direct component objects</li>
<li>A global variable, accessible by O, in the scope of M</li>
</ol>
<h2 id="&#x7BC4;&#x4F8B;&#xFF1A;"><a href="#&#x7BC4;&#x4F8B;&#xFF1A;" class="headerlink" title="&#x7BC4;&#x4F8B;&#xFF1A;"></a>&#x7BC4;&#x4F8B;&#xFF1A;</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A Law of Demeter example in Java.</span></span><br><span class="line"><span class="comment"> * Created by Alvin Alexander, &lt;a href=&quot;http://devdaily.com&quot; title=&quot;http://devdaily.com&quot;&gt;http://devdaily.com&lt;/a&gt;.</span></span><br><span class="line"><span class="comment"> * This is an adaptation of the source code example from the book</span></span><br><span class="line"><span class="comment"> * The Pragmatic Programmer.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LawOfDemeterInJava</span></span></span><br><span class="line"><span class="class"></span>{</span><br><span class="line">  <span class="keyword">private</span> Topping cheeseTopping;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Good examples of following the Law of Demeter.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">goodExamples</span><span class="params">(Pizza pizza)</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    Foo foo = <span class="keyword">new</span> Foo();</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// (1) it&apos;s okay to call our own methods</span></span><br><span class="line">    doSomething();</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// (2) it&apos;s okay to call methods on objects passed in to our method</span></span><br><span class="line">    <span class="keyword">int</span> price = pizza.getPrice();</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// (3) it&apos;s okay to call methods on any objects we create</span></span><br><span class="line">    cheeseTopping = <span class="keyword">new</span> CheeseTopping();</span><br><span class="line">    <span class="keyword">float</span> weight = cheeseTopping.getWeightUsed();</span><br><span class="line">     </span><br><span class="line">    <span class="comment">// (4) any directly held component objects</span></span><br><span class="line">    foo.doBar();</span><br><span class="line">  }</span><br><span class="line">   </span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>{</span><br><span class="line">    <span class="comment">// do something here ...</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<h2 id="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"><a href="#&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;" class="headerlink" title="&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;"></a>&#x53C3;&#x8003;&#x8CC7;&#x6599;&#xFF1A;</h2><ul>
<li><a href="http://en.wikipedia.org/wiki/Law_of_Demeter" target="_blank" rel="noopener">Law_of_Demeter</a></li>
<li><a href="http://alvinalexander.com/java/java-law-of-demeter-java-examples" target="_blank" rel="noopener">Law of Demeter - Java examples</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2016/12/09/Java-Object-equality-in-Java/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/09/Java-Object-equality-in-Java/" itemprop="url">
                  [Java] Object equality in Java
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-09T17:26:05+08:00">
                2016-12-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/09/Java-Object-equality-in-Java/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2016/12/09/Java-Object-equality-in-Java/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&#x5728;Java&#x4E2D;&#xFF0C;&#x8981;&#x6BD4;&#x8F03;&#x5169;&#x500B;&#x57FA;&#x672C;&#x578B;&#x614B;&#x7684;&#x8B8A;&#x6578;&#xFF0C;&#x8981;&#x4F7F;&#x7528;<code>==</code>&#x3002;<br>&#x8981;&#x6BD4;&#x8F03;&#x5169;&#x500B;&#x7269;&#x4EF6;&#x578B;&#x614B;&#x7684;&#x8B8A;&#x6578;&#xFF0C;&#x8981;&#x4F7F;&#x7528;<code>equals</code>&#x3002;</p>
<p>&#x56E0;&#x70BA;&#x6240;&#x6709;&#x7684;&#x7269;&#x4EF6;&#x90FD;&#x662F;&#x7E7C;&#x627F;Object&#xFF0C;&#x52A0;&#x4E0A;Object&#x7684;equals()&#x662F;&#x4F7F;&#x7528;<code>==</code>&#x5224;&#x5B9A;&#xFF0C;&#x6240;&#x4EE5;&#x9700;&#x8981;Override Object&#x7684;<code>equals()</code>&#x51FD;&#x5F0F;&#x3002;</p>
<p>Object&#x7684;<code>equals()</code>&#x51FD;&#x5F0F;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object paramObject)</span> </span>{</span><br><span class="line">	<span class="keyword">return</span> (<span class="keyword">this</span> == paramObject);</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<h4 id="&#x7BC4;&#x4F8B;&#xFF1A;"><a href="#&#x7BC4;&#x4F8B;&#xFF1A;" class="headerlink" title="&#x7BC4;&#x4F8B;&#xFF1A;"></a>&#x7BC4;&#x4F8B;&#xFF1A;</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>{</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span>	x;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span>	y;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Point</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>{</span><br><span class="line">		<span class="keyword">this</span>.x = x;</span><br><span class="line">		<span class="keyword">this</span>.y = y;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object that)</span> </span>{</span><br><span class="line">		<span class="keyword">if</span> (that <span class="keyword">instanceof</span> Point) {</span><br><span class="line">			Point point = (Point) that;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.x == point.x &amp;&amp; <span class="keyword">this</span>.y == point.y;</span><br><span class="line">		}</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	}</span><br><span class="line">    </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>{</span><br><span class="line">		<span class="keyword">return</span> Objects.hash(x,y);</span><br><span class="line">	}    </span><br><span class="line">}</span><br></pre></td></tr></table></figure>
<ul>
<li>&#x6CE8;&#x610F;&#xFF1A;&#x7576;Override equals&#x6642;&#xFF0C;hashCode&#x6700;&#x597D;&#x4E5F;&#x8981;Override&#x3002;</li>
</ul>
<p>&#x4F8B;&#x5982;&#xFF1A;<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PointTest</span> </span>{</span><br><span class="line">	<span class="keyword">private</span> Object	point1;</span><br><span class="line">	<span class="keyword">private</span> Point	point2;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Before</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>{</span><br><span class="line">		point1 = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">		point2 = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCase</span><span class="params">()</span> </span>{</span><br><span class="line">		Set&lt;Object&gt; set = <span class="keyword">new</span> HashSet&lt;Object&gt;();</span><br><span class="line">		set.add(point1);</span><br><span class="line">		assertTrue(set.contains(point2));</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<ol>
<li>&#x8A08;&#x7B97;point2&#x7684;hashCode</li>
<li>&#x8A08;&#x7B97;point1&#x7684;hashCode</li>
<li>&#x82E5;hashCode&#x4E00;&#x6A23;&#x4EE3;&#x8868;&#x843D;&#x5728;&#x540C;&#x4E00;&#x500B;bucket</li>
<li>&#x518D;&#x900F;&#x904E;equals&#x5224;&#x5225;&#x662F;&#x5426;&#x76F8;&#x7B49;</li>
</ol>
<p>hashCode&#x53EF;&#x4EE5;&#x900F;&#x904E;Objects.hash()&#x5354;&#x52A9;&#x8A08;&#x7B97;&#xFF0C;&#x6216;&#x662F;&#x81EA;&#x884C;&#x8A2D;&#x8A08;&#x516C;&#x5F0F;&#x3002;<br>&#x4F8B;&#x5982;&#xFF1A;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#hashCode(" target="_blank" rel="noopener">String&#x7684;hashCode</a>)&#x3002;</p>
<p>&#x6709;&#x883B;&#x591A;&#x985E;&#x4F3C;&#x7684;&#x6587;&#x7AE0;&#x63D0;&#x5230;&#x70BA;&#x4EC0;&#x9EBC;&#x8981;&#x7528;31&#x7576;&#x4E58;&#x6578;&#x5462;?&#x4F8B;&#x5982;&#xFF1A;<a href="http://stackoverflow.com/questions/299304/why-does-javas-hashcode-in-string-use-31-as-a-multiplier" target="_blank" rel="noopener">Why does Java&#x2019;s hashCode() in String use 31 as a multiplier?</a></p>
<p>&#x67E5;&#x4E86;&#x76F8;&#x95DC;&#x7684;&#x8A0E;&#x8AD6;&#x5E7E;&#x4E4E;&#x90FD;&#x662F;31&#x5F0F;&#x8CEA;&#x6578;&#x4E26;&#x4E14;jvm&#x53EF;&#x4EE5;&#x5C0D;&#x5176;&#x505A;&#x6700;&#x4F73;&#x5316;&#xFF0C;&#x500B;&#x4EBA;&#x63A8;&#x6E2C;&#x4E3B;&#x8981;&#x539F;&#x56E0;31&#x53EF;&#x4EE5;&#x5927;&#x5E45;&#x964D;&#x4F4E;collision&#x7684;&#x6A5F;&#x6703;&#xFF0C;&#x6216;&#x8A31;&#x6F14;&#x7B97;&#x6CD5;&#x6216;&#x662F;&#x6709;&#x76F8;&#x95DC;&#x7684;&#x8AD6;&#x6587;&#x6703;&#x6709;&#x66F4;&#x8A73;&#x7D30;&#x7684;&#x8AAA;&#x660E;&#x3002;</p>
<h4 id="&#x76F8;&#x95DC;&#x8CC7;&#x6599;&#xFF1A;"><a href="#&#x76F8;&#x95DC;&#x8CC7;&#x6599;&#xFF1A;" class="headerlink" title="&#x76F8;&#x95DC;&#x8CC7;&#x6599;&#xFF1A;"></a>&#x76F8;&#x95DC;&#x8CC7;&#x6599;&#xFF1A;</h4><p><a href="http://www.codedata.com.tw/java/object-equality-1/" target="_blank" rel="noopener">&#x7269;&#x4EF6;&#x76F8;&#x7B49;&#x6027;&#xFF08;&#x4E0A;&#xFF09;</a></p>
<h4 id="&#x7BC4;&#x4F8B;&#x7684;&#x539F;&#x59CB;&#x78BC;&#xFF1A;https-github-com-pandaforme-ObjectEqual"><a href="#&#x7BC4;&#x4F8B;&#x7684;&#x539F;&#x59CB;&#x78BC;&#xFF1A;https-github-com-pandaforme-ObjectEqual" class="headerlink" title="&#x7BC4;&#x4F8B;&#x7684;&#x539F;&#x59CB;&#x78BC;&#xFF1A;https://github.com/pandaforme/ObjectEqual"></a>&#x7BC4;&#x4F8B;&#x7684;&#x539F;&#x59CB;&#x78BC;&#xFF1A;<a href="https://github.com/pandaforme/ObjectEqual" target="_blank" rel="noopener">https://github.com/pandaforme/ObjectEqual</a></h4>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="pandaforme" />
          <p class="site-author-name" itemprop="name">pandaforme</p>
          <p class="site-description motion-element" itemprop="description">This is a programming blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">39</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分類</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">標籤</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/pandaforme" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://tw.linkedin.com/in/chien-ku-chen-78334745" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">pandaforme</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'pandaforme';
      var disqus_identifier = 'index.html';

      var disqus_title = "";


      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      

    </script>
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  


</body>
</html>
