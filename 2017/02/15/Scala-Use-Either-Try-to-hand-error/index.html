<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-tw">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Scala,Exception,Either,Try," />





  <link rel="alternate" href="/atom.xml" title="Programming blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="&amp;#x5728;OOP&amp;#x7684;&amp;#x8A9E;&amp;#x8A00;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x5011;exception&amp;#x4F86;&amp;#x8868;&amp;#x9054;&amp;#x7A0B;&amp;#x5F0F;&amp;#x932F;&amp;#x8AA4;&amp;#x6216;&amp;#x662F;&amp;#x7CFB;&amp;#x7D71;crash&amp;#xFF0E;Exception&amp;#x53C8;&amp;#x53E">
<meta property="og:type" content="article">
<meta property="og:title" content="[Scala] Use Either to hand error cases">
<meta property="og:url" content="https://pandaforme.github.io/2017/02/15/Scala-Use-Either-Try-to-hand-error/index.html">
<meta property="og:site_name" content="Programming blog">
<meta property="og:description" content="&amp;#x5728;OOP&amp;#x7684;&amp;#x8A9E;&amp;#x8A00;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x5011;exception&amp;#x4F86;&amp;#x8868;&amp;#x9054;&amp;#x7A0B;&amp;#x5F0F;&amp;#x932F;&amp;#x8AA4;&amp;#x6216;&amp;#x662F;&amp;#x7CFB;&amp;#x7D71;crash&amp;#xFF0E;Exception&amp;#x53C8;&amp;#x53E">
<meta property="og:updated_time" content="2017-02-16T04:08:25.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[Scala] Use Either to hand error cases">
<meta name="twitter:description" content="&amp;#x5728;OOP&amp;#x7684;&amp;#x8A9E;&amp;#x8A00;&amp;#x4E2D;&amp;#xFF0C;&amp;#x6211;&amp;#x5011;exception&amp;#x4F86;&amp;#x8868;&amp;#x9054;&amp;#x7A0B;&amp;#x5F0F;&amp;#x932F;&amp;#x8AA4;&amp;#x6216;&amp;#x662F;&amp;#x7CFB;&amp;#x7D71;crash&amp;#xFF0E;Exception&amp;#x53C8;&amp;#x53E">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://pandaforme.github.io/2017/02/15/Scala-Use-Either-Try-to-hand-error/"/>





  <title> [Scala] Use Either to hand error cases | Programming blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-tw">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-53742025-1', 'auto');
  ga('send', 'pageview');
</script>









  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Programming blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">This is a programming blog</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首頁
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分類
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            關於
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            歸檔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            標籤
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            檢索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://pandaforme.github.io/2017/02/15/Scala-Use-Either-Try-to-hand-error/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="pandaforme">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Programming blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Programming blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                [Scala] Use Either to hand error cases
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">發表於</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-15T16:57:00+08:00">
                2017-02-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分類於</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Scala/" itemprop="url" rel="index">
                    <span itemprop="name">Scala</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/02/15/Scala-Use-Either-Try-to-hand-error/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/02/15/Scala-Use-Either-Try-to-hand-error/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>&#x5728;OOP&#x7684;&#x8A9E;&#x8A00;&#x4E2D;&#xFF0C;&#x6211;&#x5011;exception&#x4F86;&#x8868;&#x9054;&#x7A0B;&#x5F0F;&#x932F;&#x8AA4;&#x6216;&#x662F;&#x7CFB;&#x7D71;crash&#xFF0E;Exception&#x53C8;&#x53EF;&#x4EE5;&#x5206;&#x70BA;<code>Checked Exception</code> &#x548C; <code>UnChecked Excpetion</code>&#xFF0E;</p>
<ul>
<li><p>Checked Exception: &#x6703;&#x5C07;&#x8981;&#x4E1F;&#x51FA;&#x7684;excpetion&#x5BEB;&#x5728;function&#x7684;signature&#xFF0E;<br>&#x4F8B;&#x5982;&#xFF1A;</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">interface <span class="type">Foo</span>() <span class="keyword">throws</span> <span class="type">XXXException</span>, <span class="type">YYYException</span></div></pre></td></tr></table></figure>
</li>
<li><p>UnChecked Excpetion: &#x8981;&#x4E1F;&#x51FA;&#x7684;excpetion&#x4E0D;&#x6703;&#x5BEB;&#x5728;function&#x7684;signature&#xFF0C;&#x547C;&#x53EB;function&#x7684;&#x4EBA;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6709;exception&#x8981;&#x8655;&#x7406;&#xFF0E;</p>
</li>
</ul>
<p>Checked Exception&#x6703;&#x9055;&#x53CD;<a href="https://en.wikipedia.org/wiki/Open/closed_principle" target="_blank" rel="external">Open/Closed Principle</a>&#xFF0C;&#x7576;&#x6709;&#x65B0;&#x589E;&#x4E1F;&#x51FA;&#x7684;excpetion&#xFF0C;&#x9700;&#x8981;&#x4FEE;&#x6539;interface signature&#xFF1B;UnChecked Excpetion&#x5247;&#x662F;&#x9700;&#x8981;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;exception&#x9700;&#x8981;&#x8655;&#x7406;&#xFF0E;</p>
<p>&#x9019;&#x5169;&#x7A2E;exception&#x5B70;&#x597D;&#x5B70;&#x58DE;&#xFF0C;&#x5728; <code>Clean code: a handbook of agile software craftsmanship, Robert C. Martin</code> &#x6709;&#x63D0;&#x5230;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">The debate is over. For years Java programmers have debated over the benefits and liabilities of checked exceptions. When checked exceptions were introduced in the first version of Java, they seemed like a great idea. The signature of every method would list all of the exceptions that it could pass to its caller. Moreover, these exceptions were part of the type</div><div class="line">of the method. Your code literally wouldn&apos;t compile if the signature didn&apos;t match what your code could do.</div><div class="line"></div><div class="line">At the time, we thought that checked exceptions were a great idea; and yes, they can yield some benefit. However, it is clear now that they aren&apos;t necessary for the production of robust software. C# doesn&apos;t have checked exceptions, and despite valiant attempts, C++ doesn&apos;t either. Neither do Python or Ruby. Yet it is possible to write robust software in all of these languages. Because that is the case, we have to decide&#x2014;really&#x2014;whether checked exceptions are worth their price.</div><div class="line"></div><div class="line">Checked exceptions can sometimes be useful if you are writing a critical library: You must catch them. But in general application development the dependency costs outweigh the benefits</div></pre></td></tr></table></figure></p>
<p>&#x5728;Java&#x4E2D;&#x5EFA;&#x8B70;&#x4F7F;&#x7528;UnChecked Excpetion&#xFF0C;&#x4F46;&#x662F;&#x9019;&#x6703;&#x5C0E;&#x81F4;&#x53E6;&#x5916;&#x4E00;&#x500B;&#x707D;&#x96E3;&#x2026;</p>
<ol>
<li>&#x547C;&#x53EB;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x6703;&#x4E1F;&#x51FA;exception</li>
<li>&#x547C;&#x53EB;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;excpetion&#x8981;&#x8655;&#x7406;&#xFF0C;&#x7576;call chain&#x5F88;&#x6DF1;&#x7684;&#x6642;&#x5019;&#x66F4;&#x662F;&#x7CDF;&#x7CD5;&#x2026;</li>
<li>&#x5230;&#x8655;&#x5145;&#x6EFF;&#x4E86; <code>try{...} catch{...}</code></li>
</ol>
<p>&#x76F8;&#x4FE1;&#x4F7F;&#x7528;Java&#x958B;&#x767C;&#x7684;&#x5DE5;&#x7A0B;&#x5E2B;&#x61C9;&#x8A72;&#x611F;&#x89F8;&#x826F;&#x591A;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x7DAD;&#x8B77;&#x820A;&#x5C08;&#x6848;&#xFF0E;&#x4E00;&#x500B;call chain&#x9577;&#x9054;&#x5341;&#x5E7E;&#x5C64;&#xFF0C;&#x6BCF;&#x4E00;&#x5C64;&#x4E1F;&#x7684;excpetion&#x90FD;&#x4E0D;&#x4E00;&#x6A23;&#xFF0C;&#x6709;&#x4E9B;&#x5C64;&#x6703;&#x8655;&#x7406;exception&#xFF0C;&#x6709;&#x4E9B;&#x53C8;&#x4E0D;&#x6703;&#xFF0C;&#x6700;&#x5F8C;&#x7684;&#x5927;&#x7D55;&#x62DB;&#x5C31;&#x662F;&#x6BCF;&#x4E00;&#x5C64;&#x90FD;&#x52A0; <code>try{...} catch{...}</code>&#xFF0E;</p>
<p>&#x4F8B;&#x5916;&#x8655;&#x7406;&#x5728;OOP&#x662F;&#x4E00;&#x500B;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x8B70;&#x984C;&#xFF0C;&#x6C92;&#x6709;&#x8B39;&#x614E;&#x8655;&#x7406;&#x5F88;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x7DAD;&#x8B77;&#x56F0;&#x96E3;&#x548C;&#x767C;&#x751F;&#x554F;&#x984C;&#x4E0D;&#x5BB9;&#x6613;&#x627E;&#x5230;&#x554F;&#x984C;&#x9EDE;&#xFF0E;<br>&#x56E0;&#x70BA;Exception&#x662F;&#x6709;side effect&#xFF0C;&#x5728;FP&#x662F;&#x4E0D;&#x88AB;&#x51C6;&#x8A31;&#x7684;&#xFF0E;&#x6240;&#x4EE5;&#x5728;pure FP&#x7A0B;&#x5F0F;&#x4E2D;&#x662F;&#x770B;&#x4E0D;&#x5230;excpetion&#x548C; <code>try{...} catch{...}</code>&#xFF0E;</p>
<h1 id="Either"><a href="#Either" class="headerlink" title="Either"></a>Either</h1><p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x900F;&#x904E; <code>Either</code> &#x4F86;&#x9054;&#x6210;&#xFF0C;<code>Left</code> &#x653E;&#x932F;&#x8AA4;&#x7684;&#x7269;&#x4EF6;&#xFF0C;<code>Right</code> &#x653E;&#x6B63;&#x78BA;&#x7684;&#x7269;&#x4EF6;&#xFF1A;<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Either</span>[<span class="type">A</span>, <span class="type">B</span>]</span></div><div class="line"><span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Left</span>[+<span class="type">A</span>, +<span class="type">B</span>](<span class="params">a: <span class="type">A</span></span>) <span class="keyword">extends</span> <span class="title">Either</span>[<span class="type">A</span>, <span class="type">B</span>]</span></div><div class="line"><span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Right</span>[+<span class="type">A</span>, +<span class="type">B</span>](<span class="params">b: <span class="type">B</span></span>) <span class="keyword">extends</span> <span class="title">Either</span>[<span class="type">A</span>, <span class="type">B</span>]</span></div><div class="line"></div><div class="line"><span class="comment">// for exmple</span></div><div class="line"><span class="class"><span class="keyword">type</span> <span class="title">Error</span> </span>= <span class="type">String</span></div><div class="line"></div><div class="line"><span class="keyword">val</span> result = <span class="type">Right</span>[<span class="type">Error</span>, <span class="type">Int</span>](<span class="number">123</span>)</div><div class="line"><span class="keyword">val</span> error = <span class="type">Left</span>[<span class="type">Error</span>, <span class="type">Int</span>](<span class="string">&quot;Something wrong!!!&quot;</span>)</div></pre></td></tr></table></figure></p>
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x628A;&#x6B63;&#x78BA;&#x7684;&#x7D50;&#x679C;&#x6216;&#x932F;&#x8AA4;&#x653E;&#x5230; <code>Either</code> &#x9019;&#x500B;&#x5BB9;&#x5668;&#xFF0C;&#x547C;&#x53EB;&#x8005;&#x53EF;&#x4EE5;&#x6E05;&#x695A;&#x77E5;&#x9053;&#x6709;&#x9700;&#x8981;&#x8655;&#x7406;&#x932F;&#x8AA4;&#x60C5;&#x6CC1;&#xFF0C;&#x518D;&#x4F86;&#x7A0B;&#x5F0F;&#x78BC;&#x4E0D;&#x518D;&#x5230;&#x8655;&#x5145;&#x65A5; <code>try{...} catch{...}</code>&#xFF0E;</p>
<p>&#x6211;&#x5011;&#x4F7F;&#x7528;&#x56DB;&#x5247;&#x904B;&#x7B97;&#x4F86;&#x7576;&#x7BC4;&#x4F8B;&#xFF0C;&#x5982;&#x4F55;&#x4F7F;&#x7528; <code>Either</code><br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">div</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</div><div class="line">  <span class="keyword">if</span>(b == <span class="number">0</span>) <span class="type">Left</span>[<span class="type">String</span>, <span class="type">Double</span>](<span class="string">&quot;Can&apos;t divide by 0 !!!&quot;</span>)</div><div class="line">  <span class="keyword">else</span> <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a / b)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</div><div class="line">  <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a + b)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">minus</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</div><div class="line">  <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a - b)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">mul</span></span>(a: <span class="type">Double</span>, b: <span class="type">Double</span>): <span class="type">Either</span>[<span class="type">String</span>, <span class="type">Double</span>] = {</div><div class="line">  <span class="type">Right</span>[<span class="type">String</span>, <span class="type">Double</span>](a * b)</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// ((((1 + 2) * 3) / 4) - 5)</span></div><div class="line"></div><div class="line"><span class="keyword">val</span> result = <span class="keyword">for</span> {</div><div class="line">  r1 &lt;- add(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">  r2 &lt;- mul(r1, <span class="number">3</span>)</div><div class="line">  r3 &lt;- div(r2, <span class="number">4</span>)</div><div class="line">  r4 &lt;- minus(r3, <span class="number">5</span>)</div><div class="line">} <span class="keyword">yield</span> {</div><div class="line">  r4</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// result: scala.util.Either[String,Double] = Right(-2.75)</span></div><div class="line"></div><div class="line"><span class="comment">// ((((1 + 2) * 3) / 0) - 5)</span></div><div class="line"></div><div class="line"><span class="keyword">val</span> result = <span class="keyword">for</span> {</div><div class="line">  r1 &lt;- add(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line">  r2 &lt;- mul(r1, <span class="number">3</span>)</div><div class="line">  r3 &lt;- div(r2, <span class="number">0</span>)</div><div class="line">  r4 &lt;- minus(r3, <span class="number">5</span>)</div><div class="line">} <span class="keyword">yield</span> {</div><div class="line">  r4</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// result: scala.util.Either[String,Double] = Left(Can&apos;t divide by 0 !!!)</span></div></pre></td></tr></table></figure></p>
<p>&#x6839;&#x64DA;&#x4E0A;&#x9762;&#x7C21;&#x55AE;&#x7684;&#x7BC4;&#x4F8B;&#xFF0C;&#x9019;&#x6A23;&#x7684;&#x5BEB;&#x6CD5;&#x5F88;&#x660E;&#x986F;&#x512A;&#x65BC;&#x50B3;&#x7D71;OOP&#x7528;excpetion&#x4F86;&#x8655;&#x7406;&#x932F;&#x8AA4;&#xFF1A;</p>
<ul>
<li>&#x4E0D;&#x518D;&#x6709; <code>try{...} catch{...}</code> &#x5145;&#x65A5;&#x5728;&#x6BCF;&#x500B;&#x5730;&#x65B9;&#xFF0E;</li>
<li>&#x547C;&#x53EB;&#x8005;&#x53EF;&#x4EE5;&#x6839;&#x64DA;fucntion signature&#x77E5;&#x9053;&#x662F;&#x5426;&#x6703;&#x7522;&#x751F;&#x932F;&#x8AA4;&#xFF0E;</li>
<li>&#x66F4;&#x53EF;&#x4EE5;&#x5C08;&#x5FC3;&#x5728;&#x5546;&#x696D;&#x908F;&#x8F2F;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x82B1;&#x591A;&#x9918;&#x7684;&#x5FC3;&#x529B;&#x5728;&#x8655;&#x7406;&#x4F8B;&#x5916;&#xFF0E;</li>
</ul>
<h1 id="Try"><a href="#Try" class="headerlink" title="Try"></a>Try</h1><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">sealed</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Try</span>[+<span class="type">T</span>]</span></div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Failure</span>[+<span class="type">T</span>](<span class="params">exception: <span class="type">Throwable</span></span>) <span class="keyword">extends</span> <span class="title">Try</span>[<span class="type">T</span>] </span></div><div class="line"></div><div class="line"><span class="keyword">final</span> <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">Success</span>[+<span class="type">T</span>](<span class="params">value: <span class="type">T</span></span>) <span class="keyword">extends</span> <span class="title">Try</span>[<span class="type">T</span>]</span></div></pre></td></tr></table></figure>
<p><code>Try</code> &#x4E5F;&#x662F;&#x985E;&#x4F3C;&#x65BC; <code>Either</code> &#x7684;context&#xFF0C;&#x6709;&#x8208;&#x8DA3;&#x7684;&#x8B80;&#x8005;&#x53EF;&#x4EE5;&#x8A66;&#x7528;&#x770B;&#x770B;&#xFF0E;&#x5728;&#x5BE6;&#x52D9;&#x4E0A;&#x5927;&#x90E8;&#x5206;&#x90FD;&#x63A1;&#x7528; <code>Either</code>&#xFF0C;&#x4E0D;&#x63A1;&#x7528; <code>Try</code>&#x7684;&#x539F;&#x56E0;&#x662F;&#xFF1A;</p>
<ul>
<li>&#x6C92;&#x6709;&#x8FA6;&#x6CD5;&#x5C0D;exception&#x505A; <code>exhaustive pattern match</code>&#xFF0C;&#x7576;&#x662F;Failure&#x7684;&#x6642;&#x5019;&#xFF0C;&#x547C;&#x53EB;&#x8005;&#x4E0D;&#x77E5;&#x9053;&#x6709;&#x54EA;&#x4E9B;exception&#x6703;&#x4E1F;&#x51FA;&#xFF0C;&#x53EA;&#x77E5;&#x9053;&#x6703;&#x4E1F;&#x51FA;&#x4E00;&#x500B; <code>Throwable class</code>&#xFF0E;</li>
</ul>
<p>&#x4F7F;&#x7528; <code>Either</code> &#x6211;&#x5011;&#x53EF;&#x4EE5;&#x81EA;&#x8A02;Error type&#xFF0C;&#x7576;&#x5931;&#x6557;&#x6642;&#x5019;&#x5C31;&#x53EF;&#x4EE5;&#x5C0D;Error type&#x505A; <code>exhaustive pattern match</code>&#xFF0C;&#x4F9D;&#x64DA;&#x4E0D;&#x540C;&#x7684;&#x932F;&#x8AA4;&#x505A;&#x4E0D;&#x540C;&#x7684;&#x8655;&#x7406;&#xFF0E;</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Scala/" rel="tag"># Scala</a>
          
            <a href="/tags/Exception/" rel="tag"># Exception</a>
          
            <a href="/tags/Either/" rel="tag"># Either</a>
          
            <a href="/tags/Try/" rel="tag"># Try</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/20/Scala-How-to-use-Option-correctly/" rel="next" title="[Scala] How to use Option correctly">
                <i class="fa fa-chevron-left"></i> [Scala] How to use Option correctly
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目錄
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            本站概覽
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="pandaforme" />
          <p class="site-author-name" itemprop="name">pandaforme</p>
          <p class="site-description motion-element" itemprop="description">This is a programming blog</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">40</span>
              <span class="site-state-item-name">文章</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">分類</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">標籤</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/pandaforme" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://tw.linkedin.com/in/chien-ku-chen-78334745" target="_blank" title="Linkedin">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  Linkedin
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Either"><span class="nav-number">1.</span> <span class="nav-text">Either</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Try"><span class="nav-number">2.</span> <span class="nav-text">Try</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">pandaforme</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 強力驅動
</div>

<div class="theme-info">
  主題 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'pandaforme';
      var disqus_identifier = '2017/02/15/Scala-Use-Either-Try-to-hand-error/';

      var disqus_title = "[Scala] Use Either to hand error cases";


      function run_disqus_script(disqus_script) {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');

      
        var disqus_config = function () {
            this.page.url = disqus_url;
            this.page.identifier = disqus_identifier;
            this.page.title = disqus_title;
        };
        run_disqus_script('embed.js');
      

    </script>
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  


</body>
</html>
